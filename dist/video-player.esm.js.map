{"version":3,"file":"video-player.esm.js","sources":["../src/core/Events.js","../src/components/Component.js","../src/components/PlayButton.js","../src/utils/time.js","../src/components/ProgressBar.js","../src/components/VolumeControl.js","../src/components/TimeDisplay.js","../src/components/FullscreenButton.js","../src/components/SpeedControl.js","../src/components/QualityControl.js","../src/components/Captions.js","../src/components/Controls.js","../src/core/VideoPlayer.js"],"sourcesContent":["/**\r\n * Simple Pub/Sub Event System\r\n */\r\nexport default class EventEmitter {\r\n    constructor() {\r\n        this.events = {};\r\n    }\r\n\r\n    on(event, listener) {\r\n        if (!this.events[event]) {\r\n            this.events[event] = [];\r\n        }\r\n        this.events[event].push(listener);\r\n        return () => this.off(event, listener);\r\n    }\r\n\r\n    off(event, listenerToRemove) {\r\n        if (!this.events[event]) return;\r\n        this.events[event] = this.events[event].filter(listener => listener !== listenerToRemove);\r\n    }\r\n\r\n    emit(event, ...args) {\r\n        if (!this.events[event]) return;\r\n        this.events[event].forEach(listener => listener(...args));\r\n    }\r\n\r\n    // Allow multiple events to be registered at once\r\n    onAny(events, listener) {\r\n        events.forEach(event => this.on(event, listener));\r\n    }\r\n}\r\n","/**\r\n * Base Component Class\r\n */\r\nexport default class Component {\r\n    constructor(player) {\r\n        this.player = player;\r\n        this.el = null;\r\n    }\r\n\r\n    /**\r\n     * Create the DOM element for this component\r\n     * @returns {HTMLElement}\r\n     */\r\n    create() {\r\n        throw new Error('Component must implement create() method');\r\n    }\r\n\r\n    /**\r\n     * Mount the component to a container\r\n     * @param {HTMLElement} container\r\n     */\r\n    mount(container) {\r\n        if (!this.el) {\r\n            this.el = this.create();\r\n        }\r\n        container.appendChild(this.el);\r\n    }\r\n\r\n    /**\r\n     * Destroy the component and remove from DOM\r\n     */\r\n    destroy() {\r\n        if (this.el && this.el.parentNode) {\r\n            this.el.parentNode.removeChild(this.el);\r\n        }\r\n        this.el = null;\r\n    }\r\n\r\n    /**\r\n     * Utility to create an element with class name\r\n     * @param {string} tag \r\n     * @param {string} className \r\n     * @returns {HTMLElement}\r\n     */\r\n    createElement(tag, className) {\r\n        const el = document.createElement(tag);\r\n        if (className) el.className = className;\r\n        return el;\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class PlayButton extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onPlay = this.onPlay.bind(this);\r\n        this.onPause = this.onPause.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const btn = this.createElement('button', 'vp-button vp-button--play');\r\n        btn.innerHTML = this.getIcon(false);\r\n\r\n        btn.onclick = this.onClick;\r\n\r\n        // Listen to player state changes\r\n        this.player.on('play', this.onPlay);\r\n        this.player.on('pause', this.onPause);\r\n\r\n        return btn;\r\n    }\r\n\r\n    onClick() {\r\n        this.player.togglePlay();\r\n    }\r\n\r\n    onPlay() {\r\n        this.el.innerHTML = this.getIcon(true);\r\n        this.el.classList.add('vp-button--active');\r\n    }\r\n\r\n    onPause() {\r\n        this.el.innerHTML = this.getIcon(false);\r\n        this.el.classList.remove('vp-button--active');\r\n    }\r\n\r\n    getIcon(isPlaying) {\r\n        return isPlaying\r\n            ? '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/></svg>' // Pause icon\r\n            : '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M8 5v14l11-7z\"/></svg>'; // Play icon\r\n    }\r\n}\r\n","export function formatTime(seconds) {\r\n    if (isNaN(seconds)) return '00:00';\r\n\r\n    const date = new Date(seconds * 1000);\r\n    const hh = date.getUTCHours();\r\n    const mm = date.getUTCMinutes();\r\n    const ss = date.getUTCSeconds().toString().padStart(2, '0');\r\n\r\n    if (hh) {\r\n        return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\r\n    }\r\n    return `${mm}:${ss}`;\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class ProgressBar extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.isDragging = false;\r\n\r\n        // Bind methods\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n    }\r\n\r\n    create() {\r\n        // The mounting point (in Controls.js) is .vp-timeline-container\r\n        // So here we create .vp-timeline\r\n        const timeline = this.createElement('div', 'vp-timeline');\r\n\r\n        this.progressBar = this.createElement('div', 'vp-progress-bar');\r\n\r\n        // Handle is just visual in legacy CSS (pseudo-element on progress-bar::after)\r\n        // But here we might want an explicit element or stick to CSS.\r\n        // Legacy CSS used: .progress-bar::after for handle.\r\n        // My controls.css uses: .vp-progress-handle element.\r\n        this.progressHandle = this.createElement('div', 'vp-progress-handle');\r\n\r\n        this.progressBar.appendChild(this.progressHandle);\r\n        timeline.appendChild(this.progressBar);\r\n\r\n        // Events\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n\r\n        // Time Preview\r\n        this.timePreview = this.createElement('div', 'vp-time-preview');\r\n        timeline.appendChild(this.timePreview);\r\n\r\n        // Attach events for preview\r\n        timeline.addEventListener('mousemove', this.onMouseMovePreview.bind(this));\r\n\r\n        // Attach events to the timeline element for seeking\r\n        timeline.addEventListener('mousedown', this.onMouseDown);\r\n\r\n        // Save refernece\r\n        this.timeline = timeline;\r\n\r\n        return timeline;\r\n    }\r\n\r\n    onMouseMovePreview(e) {\r\n        const rect = this.timeline.getBoundingClientRect();\r\n        const pos = (e.clientX - rect.left) / rect.width;\r\n        const time = pos * this.player.video.duration;\r\n\r\n        this.timePreview.textContent = formatTime(time);\r\n        // Position it\r\n        const previewX = e.clientX - rect.left;\r\n        this.timePreview.style.left = `${previewX}px`;\r\n        this.timePreview.style.transform = 'translateX(-50%)';\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        if (this.isDragging) return;\r\n        const percent = (this.player.video.currentTime / this.player.video.duration) * 100 || 0;\r\n        this.updateUI(percent);\r\n    }\r\n\r\n    updateUI(percent) {\r\n        this.progressBar.style.width = `${percent}%`;\r\n        // Handle moves with the end of the bar naturally if appended to it?\r\n        // If handle is absolute right: -6px of the bar, then yes.\r\n        // My CSS: .vp-progress-handle { right: -6px; top: 50%; ... }\r\n        // So just changing bar width is enough.\r\n    }\r\n\r\n    onMouseDown(e) {\r\n        this.isDragging = true;\r\n        this.updateFromEvent(e);\r\n\r\n        document.addEventListener('mousemove', this.onMouseMove);\r\n        document.addEventListener('mouseup', this.onMouseUp);\r\n\r\n        // Optional: Pause while dragging? \r\n        // this.wasPlaying = !this.player.video.paused;\r\n        // if (this.wasPlaying) this.player.pause();\r\n    }\r\n\r\n    onMouseMove(e) {\r\n        if (!this.isDragging) return;\r\n        this.updateFromEvent(e);\r\n    }\r\n\r\n    onMouseUp(e) {\r\n        if (!this.isDragging) return;\r\n        this.isDragging = false;\r\n\r\n        document.removeEventListener('mousemove', this.onMouseMove);\r\n        document.removeEventListener('mouseup', this.onMouseUp);\r\n\r\n        // Final seek\r\n        this.updateFromEvent(e);\r\n\r\n        // if (this.wasPlaying) this.player.play();\r\n    }\r\n\r\n    updateFromEvent(e) {\r\n        const rect = this.timeline.getBoundingClientRect();\r\n        let pos = (e.clientX - rect.left) / rect.width;\r\n        pos = Math.max(0, Math.min(1, pos));\r\n\r\n        this.updateUI(pos * 100);\r\n\r\n        if (this.player.video.duration) {\r\n            this.player.seek(this.player.video.duration * pos);\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class VolumeControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onInput = this.onInput.bind(this);\r\n        this.onVolumeChange = this.onVolumeChange.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-volume');\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = this.getIcon(1);\r\n        this.btn.onclick = this.onClick;\r\n\r\n        this.slider = this.createElement('input', 'vp-volume__slider');\r\n        this.slider.type = 'range';\r\n        this.slider.min = 0;\r\n        this.slider.max = 1;\r\n        this.slider.step = 0.1;\r\n        this.slider.value = 1;\r\n        this.slider.oninput = this.onInput;\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.slider);\r\n\r\n        this.player.on('volumechange', this.onVolumeChange);\r\n\r\n        return container;\r\n    }\r\n\r\n    onClick() {\r\n        if (this.player.video.muted) {\r\n            this.player.video.muted = false;\r\n            this.player.setVolume(this.lastVolume || 1);\r\n        } else {\r\n            this.lastVolume = this.player.video.volume;\r\n            this.player.video.muted = true;\r\n            this.player.setVolume(0);\r\n        }\r\n    }\r\n\r\n    onInput(e) {\r\n        this.player.setVolume(e.target.value);\r\n    }\r\n\r\n    onVolumeChange() {\r\n        const volume = this.player.video.volume;\r\n        const isMuted = this.player.video.muted || volume === 0;\r\n\r\n        this.slider.value = isMuted ? 0 : volume;\r\n        this.btn.innerHTML = this.getIcon(isMuted ? 0 : volume);\r\n    }\r\n\r\n    getIcon(level) {\r\n        if (level === 0) {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/></svg>';\r\n        } else if (level < 0.5) {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/></svg>';\r\n        } else {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M3 9v6h4l5 5V4L9 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/></svg>';\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class TimeDisplay extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-time-display');\r\n\r\n        this.currentObj = this.createElement('span');\r\n        this.currentObj.textContent = '00:00';\r\n\r\n        const divider = document.createElement('span');\r\n        divider.textContent = ' / ';\r\n\r\n        this.durationObj = this.createElement('span');\r\n        this.durationObj.textContent = '00:00';\r\n\r\n        container.appendChild(this.currentObj);\r\n        container.appendChild(divider);\r\n        container.appendChild(this.durationObj);\r\n\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n        this.player.on('loadedmetadata', this.onTimeUpdate);\r\n\r\n        return container;\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        this.currentObj.textContent = formatTime(this.player.video.currentTime);\r\n        this.durationObj.textContent = formatTime(this.player.video.duration);\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class FullscreenButton extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const btn = this.createElement('button', 'vp-button vp-button--fullscreen');\r\n        btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/></svg>';\r\n        btn.onclick = this.onClick;\r\n        return btn;\r\n    }\r\n\r\n    onClick() {\r\n        if (document.fullscreenElement) {\r\n            document.exitFullscreen();\r\n        } else {\r\n            this.player.container.requestFullscreen();\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class SpeedControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n        this.onSpeedSelect = this.onSpeedSelect.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-speed-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z\"/></svg>';\r\n        this.btn.title = 'Playback Speed';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2];\r\n        speeds.forEach(speed => {\r\n            const item = this.createElement('button', 'vp-menu-btn');\r\n            item.textContent = speed + 'x';\r\n            item.dataset.speed = speed;\r\n            if (speed === 1) item.classList.add('vp-selected');\r\n            item.onclick = (e) => this.onSpeedSelect(speed, e);\r\n            this.menu.appendChild(item);\r\n        });\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        // Close menu on click outside - basic implementation\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    onSpeedSelect(speed, e) {\r\n        this.player.video.playbackRate = speed;\r\n\r\n        // Update UI\r\n        Array.from(this.menu.children).forEach(child => child.classList.remove('vp-selected'));\r\n        e.target.classList.add('vp-selected');\r\n\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class QualityControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-quality-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M19.5 4h-15A2.5 2.5 0 0 0 2 6.5v11A2.5 2.5 0 0 0 4.5 20h15a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 19.5 4zm0 13.5h-15a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5zM7.5 15h2v-6h-2v6zm5-6v6h2V9h-2zm5 0v6h2V9h-2z\"/></svg>';\r\n        this.btn.title = 'Quality';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        // Placeholder qualities mirroring legacy options\r\n        const qualities = [\r\n            { label: 'Auto', value: 'auto' },\r\n            { label: '1080p', value: '1080p' },\r\n            { label: '720p', value: '720p' },\r\n            { label: '480p', value: '480p' }\r\n        ];\r\n\r\n        qualities.forEach(q => {\r\n            const item = this.createElement('button', 'vp-menu-btn');\r\n            item.innerHTML = `<span>${q.label}</span>${q.value === 'auto' ? '<span style=\"background:#4facfe;color:white;padding:2px 4px;border-radius:2px;font-size:10px;margin-left:5px\">AUTO</span>' : ''}`;\r\n            if (q.value === 'auto') item.classList.add('vp-selected');\r\n            item.onclick = () => this.onQualitySelect(q.value, item);\r\n            this.menu.appendChild(item);\r\n        });\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    onQualitySelect(quality, element) {\r\n        console.log('Switching quality to:', quality);\r\n        // Dispatch event for VideoPlayer or handle logic if passed options\r\n        // For now just update UI\r\n        Array.from(this.menu.children).forEach(child => child.classList.remove('vp-selected'));\r\n        element.classList.add('vp-selected');\r\n\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class Captions extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\r\n        this.tracks = {};\r\n        this.currentTrack = null;\r\n        this.cues = [];\r\n\r\n        // Mock data from legacy script for demonstration if none provided\r\n        // Real implementation would fetch URLs\r\n        this.mockCaptions = {\r\n            en: `WEBVTT\r\n\r\n00:00:00.000 --> 00:00:05.000\r\nWelcome to the enhanced video player with caption support!\r\n\r\n00:00:05.000 --> 00:00:10.000\r\nThis player features multiple subtitle languages and customizable styling.\r\n\r\n00:00:10.000 --> 00:00:15.000\r\nYou can adjust the size, color, and background of captions.`,\r\n            es: `WEBVTT\r\n\r\n00:00:00.000 --> 00:00:05.000\r\n¡Bienvenido al reproductor de video mejorado!\r\n\r\n00:00:05.000 --> 00:00:10.000\r\nEste reproductor incluye múltiples idiomas.`\r\n        };\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-captions-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H7.5v-1.5h-2v3h2V11H11v2H5.5v-4h5.5v2zM19 11h-5.5v4h2v-1.5h2v1.5h1.5v-4h-5.5v2H18v-2h-1c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z\"/></svg>';\r\n        this.btn.title = 'Captions';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        // Create Overlay for captions\r\n        this.createOverlay();\r\n\r\n        // Populate Menu\r\n        this.populateMenu();\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        // Listeners\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    createOverlay() {\r\n        this.overlay = document.createElement('div');\r\n        this.overlay.className = 'vp-captions-overlay';\r\n        this.overlay.style.display = 'none';\r\n\r\n        this.captionText = document.createElement('span');\r\n        this.captionText.className = 'vp-caption-text';\r\n\r\n        this.overlay.appendChild(this.captionText);\r\n\r\n        // Append to player container (parent of controls usually)\r\n        // We defer this slightly to ensure player.container is ready/accessible\r\n        // But controls is mounted in player.container, so this.player.container should be the root.\r\n        this.player.container.appendChild(this.overlay);\r\n    }\r\n\r\n    populateMenu() {\r\n        // Off option\r\n        const offBtn = this.createElement('button', 'vp-menu-btn');\r\n        offBtn.textContent = 'Off';\r\n        offBtn.onclick = () => this.setTrack(null);\r\n        if (!this.currentTrack) offBtn.classList.add('vp-selected');\r\n        this.menu.appendChild(offBtn);\r\n\r\n        // Mock tracks\r\n        ['en', 'es'].forEach(lang => {\r\n            const btn = this.createElement('button', 'vp-menu-btn');\r\n            btn.textContent = lang.toUpperCase();\r\n            btn.dataset.lang = lang;\r\n            btn.onclick = (e) => {\r\n                this.setTrack(lang);\r\n                Array.from(this.menu.children).forEach(c => c.classList.remove('vp-selected'));\r\n                e.target.classList.add('vp-selected');\r\n                // Remove selected from 'Off'\r\n                offBtn.classList.remove('vp-selected');\r\n            };\r\n            this.menu.appendChild(btn);\r\n\r\n            // Parse immediately for mock\r\n            this.tracks[lang] = this.parseVTT(this.mockCaptions[lang]);\r\n        });\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    setTrack(lang) {\r\n        this.currentTrack = lang;\r\n        if (lang) {\r\n            this.cues = this.tracks[lang];\r\n            this.overlay.style.display = 'block';\r\n            this.btn.classList.add('vp-button--active');\r\n        } else {\r\n            this.cues = [];\r\n            this.overlay.style.display = 'none';\r\n            this.btn.classList.remove('vp-button--active');\r\n        }\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        if (!this.currentTrack || !this.cues.length) return;\r\n\r\n        const time = this.player.video.currentTime;\r\n        const activeCue = this.cues.find(cue => time >= cue.startTime && time <= cue.endTime);\r\n\r\n        if (activeCue) {\r\n            this.captionText.textContent = activeCue.text;\r\n            this.captionText.style.display = 'inline-block';\r\n        } else {\r\n            this.captionText.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    parseVTT(vttContent) {\r\n        const lines = vttContent.split('\\n').filter(line => line.trim());\r\n        const cues = [];\r\n        let currentCue = null;\r\n\r\n        for (let i = 0; i < lines.length; i++) {\r\n            const line = lines[i].trim();\r\n            if (line === 'WEBVTT') continue;\r\n\r\n            if (line.includes('-->')) {\r\n                const [start, end] = line.split('-->').map(t => t.trim());\r\n                currentCue = {\r\n                    startTime: this.parseTimeStamp(start),\r\n                    endTime: this.parseTimeStamp(end),\r\n                    text: ''\r\n                };\r\n            } else if (currentCue && line) {\r\n                currentCue.text += (currentCue.text ? ' ' : '') + line;\r\n                if (i === lines.length - 1 || lines[i + 1].includes('-->') || !lines[i + 1].trim()) {\r\n                    cues.push(currentCue);\r\n                    currentCue = null;\r\n                }\r\n            }\r\n        }\r\n        return cues;\r\n    }\r\n\r\n    parseTimeStamp(timeStr) {\r\n        const parts = timeStr.split(':');\r\n        const seconds = parts[parts.length - 1].split('.');\r\n        const s = parseInt(seconds[0]) + (parseInt(seconds[1] || 0) / 1000);\r\n\r\n        if (parts.length === 3) {\r\n            return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + s;\r\n        } else {\r\n            return parseInt(parts[0]) * 60 + s;\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport PlayButton from './PlayButton';\r\nimport ProgressBar from './ProgressBar';\r\nimport VolumeControl from './VolumeControl';\r\nimport TimeDisplay from './TimeDisplay';\r\nimport FullscreenButton from './FullscreenButton';\r\nimport SettingsMenu from './SettingsMenu';\r\nimport SpeedControl from './SpeedControl';\r\nimport QualityControl from './QualityControl';\r\nimport Captions from './Captions';\r\n\r\nexport default class Controls extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n    }\r\n\r\n    create() {\r\n        const controls = this.createElement('div', 'vp-player__controls');\r\n\r\n        // 1. Timeline Container (Top)\r\n        const timelineContainer = this.createElement('div', 'vp-timeline-container');\r\n\r\n        const progressBar = new ProgressBar(this.player);\r\n        progressBar.mount(timelineContainer);\r\n\r\n        controls.appendChild(timelineContainer);\r\n\r\n        // 2. Controls Row (Bottom)\r\n        const controlsRow = this.createElement('div', 'vp-controls-row');\r\n        controls.appendChild(controlsRow);\r\n\r\n        // -- Left Controls (Volume, Time)\r\n        const leftControls = this.createElement('div', 'vp-controls-left');\r\n        controlsRow.appendChild(leftControls);\r\n\r\n        const playBtn = new PlayButton(this.player); // Moving Play to Center optionally, but legacy has it in center usually? \r\n        // Legacy CSS says: .controls-center { flex: 0 0 auto } which implies Play might be there.\r\n        // Legacy script Step 10 HTML: \r\n        // controls-center: skip-backward, play-pause, skip-forward.\r\n        // controls-left: volume, time.\r\n        // controls-right: captions, quality, speed, pip, fullscreen.\r\n\r\n        // Actually, let's follow that exactly.\r\n\r\n        // Volume\r\n        const volumeControl = new VolumeControl(this.player);\r\n        volumeControl.mount(leftControls);\r\n\r\n        // Time\r\n        const timeDisplay = new TimeDisplay(this.player);\r\n        timeDisplay.mount(leftControls);\r\n\r\n        // -- Center Controls (Skip, Play, Skip)\r\n        const centerControls = this.createElement('div', 'vp-controls-center');\r\n        controlsRow.appendChild(centerControls);\r\n\r\n        // TODO: Add Skip Buttons later\r\n        playBtn.mount(centerControls);\r\n\r\n        // -- Right Controls (Quality, Speed, Settings, Fullscreen)\r\n        const rightControls = this.createElement('div', 'vp-controls-right');\r\n        controlsRow.appendChild(rightControls);\r\n\r\n        const qualityControl = new QualityControl(this.player);\r\n        qualityControl.mount(rightControls);\r\n\r\n        const captions = new Captions(this.player);\r\n        captions.mount(rightControls);\r\n\r\n        const speedControl = new SpeedControl(this.player);\r\n        speedControl.mount(rightControls);\r\n\r\n        // Settings Menu (General) - keeping it but maybe legacy didn't have both?\r\n        // Legacy has: qualityBtn, speedBtn, captionsBtn, pipBtn, fullscreenBtn.\r\n        // It does NOT have a generic 'settings' gear in the same way, but let's keep it or remove if redundant.\r\n        // The requester said \"use... behaviors from components\".\r\n        // I'll keep generic settings as per my specific instruction earlier, but maybe I should have removed it if it wasn't in legacy.\r\n        // Actually legacy script has \"speedMenu\", \"qualityMenu\".\r\n        // I will stick to adding Speed and Quality specifically.\r\n\r\n        const fullscreenBtn = new FullscreenButton(this.player);\r\n        fullscreenBtn.mount(rightControls);\r\n\r\n        return controls;\r\n    }\r\n}\r\n","import EventEmitter from './Events';\r\nimport Controls from '../components/Controls';\r\n\r\nexport default class VideoPlayer extends EventEmitter {\r\n    constructor(config) {\r\n        super();\r\n        this.config = {\r\n            controls: true,\r\n            autoplay: false,\r\n            theme: 'dark',\r\n            ...config\r\n        };\r\n\r\n        this.container = typeof this.config.container === 'string'\r\n            ? document.querySelector(this.config.container)\r\n            : this.config.container;\r\n\r\n        if (!this.container) {\r\n            throw new Error('VideoPlayer: Container not found');\r\n        }\r\n\r\n        this.video = null;\r\n        this.controls = null;\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.container.classList.add('vp-player');\r\n\r\n        // Setup Video Element\r\n        const existingVideo = this.container.querySelector('video');\r\n        if (existingVideo) {\r\n            this.video = existingVideo;\r\n            this.video.classList.add('vp-player__video');\r\n            // Allow config to override/set src if not present\r\n            if (this.config.src) this.video.src = this.config.src;\r\n            if (this.config.autoplay) this.video.autoplay = true;\r\n        } else {\r\n            this.video = document.createElement('video');\r\n            this.video.className = 'vp-player__video';\r\n            if (this.config.src) this.video.src = this.config.src;\r\n            if (this.config.autoplay) this.video.autoplay = true;\r\n            this.container.appendChild(this.video);\r\n        }\r\n\r\n        // Mount Controls\r\n        if (this.config.controls) {\r\n            this.controlsComponent = new Controls(this);\r\n            this.controlsComponent.mount(this.container);\r\n        }\r\n\r\n        // Event Listeners\r\n        this.attachEvents();\r\n\r\n        // Initial state\r\n        this.showControls();\r\n    }\r\n\r\n    attachEvents() {\r\n        // Video Events\r\n        this.video.addEventListener('play', () => {\r\n            this.emit('play');\r\n            this.hideControlsDelayed();\r\n        });\r\n\r\n        this.video.addEventListener('pause', () => {\r\n            this.emit('pause');\r\n            this.showControls();\r\n        });\r\n\r\n        this.video.addEventListener('ended', () => {\r\n            this.emit('ended');\r\n            this.showControls();\r\n        });\r\n\r\n        this.video.addEventListener('timeupdate', () => this.emit('timeupdate'));\r\n        this.video.addEventListener('volumechange', () => this.emit('volumechange'));\r\n        this.video.addEventListener('loadedmetadata', () => this.emit('loadedmetadata'));\r\n\r\n        // Mouse Interaction for Controls\r\n        this.container.addEventListener('mouseenter', () => this.showControls());\r\n        this.container.addEventListener('mouseleave', () => this.hideControlsDelayed());\r\n        this.container.addEventListener('mousemove', () => {\r\n            this.showControls();\r\n            this.hideControlsDelayed();\r\n        });\r\n\r\n        // Click to toggle play\r\n        this.video.addEventListener('click', () => this.togglePlay());\r\n    }\r\n\r\n    showControls() {\r\n        this.container.classList.add('vp-show-controls');\r\n        if (this.controlsTimeout) clearTimeout(this.controlsTimeout);\r\n    }\r\n\r\n    hideControlsDelayed() {\r\n        if (this.video.paused) return; // Keep controls visible if paused\r\n\r\n        if (this.controlsTimeout) clearTimeout(this.controlsTimeout);\r\n        this.controlsTimeout = setTimeout(() => {\r\n            this.container.classList.remove('vp-show-controls');\r\n        }, 3000);\r\n    }\r\n\r\n    play() {\r\n        return this.video.play();\r\n    }\r\n\r\n    pause() {\r\n        this.video.pause();\r\n    }\r\n\r\n    seek(time) {\r\n        this.video.currentTime = time;\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.video.volume = Math.max(0, Math.min(1, volume));\r\n        this.video.muted = (volume === 0);\r\n    }\r\n\r\n    togglePlay() {\r\n        if (this.video.paused) {\r\n            this.play();\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.video.remove();\r\n        if (this.controls) this.controls.destroy();\r\n        this.container.innerHTML = '';\r\n    }\r\n}\r\n"],"names":["EventEmitter","_classCallCheck","events","_createClass","key","value","on","event","listener","_this","push","off","listenerToRemove","filter","emit","_len","arguments","length","args","Array","_key","forEach","apply","onAny","_this2","Component","player","el","create","Error","mount","container","appendChild","destroy","parentNode","removeChild","createElement","tag","className","document","PlayButton","_Component","_callSuper","onClick","bind","onPlay","onPause","_inherits","btn","innerHTML","getIcon","onclick","togglePlay","classList","add","remove","isPlaying","formatTime","seconds","isNaN","date","Date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","toString","padStart","concat","ProgressBar","isDragging","onTimeUpdate","onMouseDown","onMouseMove","onMouseUp","timeline","progressBar","progressHandle","timePreview","addEventListener","onMouseMovePreview","e","rect","getBoundingClientRect","pos","clientX","left","width","time","video","duration","textContent","previewX","style","transform","percent","currentTime","updateUI","updateFromEvent","removeEventListener","Math","max","min","seek","VolumeControl","onInput","onVolumeChange","slider","type","step","oninput","muted","setVolume","lastVolume","volume","target","isMuted","level","TimeDisplay","currentObj","divider","durationObj","FullscreenButton","fullscreenElement","exitFullscreen","requestFullscreen","SpeedControl","toggleMenu","onSpeedSelect","position","title","menu","speeds","speed","item","dataset","contains","toggle","playbackRate","from","children","child","QualityControl","qualities","label","q","onQualitySelect","quality","element","console","log","Captions","tracks","currentTrack","cues","mockCaptions","en","es","createOverlay","populateMenu","overlay","display","captionText","_this3","offBtn","setTrack","lang","toUpperCase","c","parseVTT","activeCue","find","cue","startTime","endTime","text","vttContent","lines","split","line","trim","currentCue","i","includes","_line$split$map","map","t","_line$split$map2","_slicedToArray","start","end","parseTimeStamp","timeStr","parts","s","parseInt","Controls","controls","timelineContainer","controlsRow","leftControls","playBtn","volumeControl","timeDisplay","centerControls","rightControls","qualityControl","captions","speedControl","fullscreenBtn","VideoPlayer","_EventEmitter","config","_objectSpread","autoplay","theme","querySelector","init","existingVideo","src","controlsComponent","attachEvents","showControls","hideControlsDelayed","controlsTimeout","clearTimeout","paused","setTimeout","play","pause"],"mappings":"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"}