{"version":3,"file":"video-player.min.js","sources":["../src/core/Events.js","../src/components/Component.js","../src/components/PlayButton.js","../src/utils/time.js","../src/components/ProgressBar.js","../src/components/VolumeControl.js","../src/components/TimeDisplay.js","../src/components/FullscreenButton.js","../src/components/SpeedControl.js","../src/components/QualityControl.js","../src/components/Captions.js","../src/components/Controls.js","../src/core/VideoPlayer.js"],"sourcesContent":["/**\r\n * Simple Pub/Sub Event System\r\n */\r\nexport default class EventEmitter {\r\n    constructor() {\r\n        this.events = {};\r\n    }\r\n\r\n    on(event, listener) {\r\n        if (!this.events[event]) {\r\n            this.events[event] = [];\r\n        }\r\n        this.events[event].push(listener);\r\n        return () => this.off(event, listener);\r\n    }\r\n\r\n    off(event, listenerToRemove) {\r\n        if (!this.events[event]) return;\r\n        this.events[event] = this.events[event].filter(listener => listener !== listenerToRemove);\r\n    }\r\n\r\n    emit(event, ...args) {\r\n        if (!this.events[event]) return;\r\n        this.events[event].forEach(listener => listener(...args));\r\n    }\r\n\r\n    // Allow multiple events to be registered at once\r\n    onAny(events, listener) {\r\n        events.forEach(event => this.on(event, listener));\r\n    }\r\n}\r\n","/**\r\n * Base Component Class\r\n */\r\nexport default class Component {\r\n    constructor(player) {\r\n        this.player = player;\r\n        this.el = null;\r\n    }\r\n\r\n    /**\r\n     * Create the DOM element for this component\r\n     * @returns {HTMLElement}\r\n     */\r\n    create() {\r\n        throw new Error('Component must implement create() method');\r\n    }\r\n\r\n    /**\r\n     * Mount the component to a container\r\n     * @param {HTMLElement} container\r\n     */\r\n    mount(container) {\r\n        if (!this.el) {\r\n            this.el = this.create();\r\n        }\r\n        container.appendChild(this.el);\r\n    }\r\n\r\n    /**\r\n     * Destroy the component and remove from DOM\r\n     */\r\n    destroy() {\r\n        if (this.el && this.el.parentNode) {\r\n            this.el.parentNode.removeChild(this.el);\r\n        }\r\n        this.el = null;\r\n    }\r\n\r\n    /**\r\n     * Utility to create an element with class name\r\n     * @param {string} tag \r\n     * @param {string} className \r\n     * @returns {HTMLElement}\r\n     */\r\n    createElement(tag, className) {\r\n        const el = document.createElement(tag);\r\n        if (className) el.className = className;\r\n        return el;\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class PlayButton extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onPlay = this.onPlay.bind(this);\r\n        this.onPause = this.onPause.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const btn = this.createElement('button', 'vp-button vp-button--play');\r\n        btn.innerHTML = this.getIcon(false);\r\n\r\n        btn.onclick = this.onClick;\r\n\r\n        // Listen to player state changes\r\n        this.player.on('play', this.onPlay);\r\n        this.player.on('pause', this.onPause);\r\n\r\n        return btn;\r\n    }\r\n\r\n    onClick() {\r\n        this.player.togglePlay();\r\n    }\r\n\r\n    onPlay() {\r\n        this.el.innerHTML = this.getIcon(true);\r\n        this.el.classList.add('vp-button--active');\r\n    }\r\n\r\n    onPause() {\r\n        this.el.innerHTML = this.getIcon(false);\r\n        this.el.classList.remove('vp-button--active');\r\n    }\r\n\r\n    getIcon(isPlaying) {\r\n        return isPlaying\r\n            ? '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/></svg>' // Pause icon\r\n            : '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M8 5v14l11-7z\"/></svg>'; // Play icon\r\n    }\r\n}\r\n","export function formatTime(seconds) {\r\n    if (isNaN(seconds)) return '00:00';\r\n\r\n    const date = new Date(seconds * 1000);\r\n    const hh = date.getUTCHours();\r\n    const mm = date.getUTCMinutes();\r\n    const ss = date.getUTCSeconds().toString().padStart(2, '0');\r\n\r\n    if (hh) {\r\n        return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\r\n    }\r\n    return `${mm}:${ss}`;\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class ProgressBar extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.isDragging = false;\r\n\r\n        // Bind methods\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n    }\r\n\r\n    create() {\r\n        // The mounting point (in Controls.js) is .vp-timeline-container\r\n        // So here we create .vp-timeline\r\n        const timeline = this.createElement('div', 'vp-timeline');\r\n\r\n        this.progressBar = this.createElement('div', 'vp-progress-bar');\r\n\r\n        // Handle is just visual in legacy CSS (pseudo-element on progress-bar::after)\r\n        // But here we might want an explicit element or stick to CSS.\r\n        // Legacy CSS used: .progress-bar::after for handle.\r\n        // My controls.css uses: .vp-progress-handle element.\r\n        this.progressHandle = this.createElement('div', 'vp-progress-handle');\r\n\r\n        this.progressBar.appendChild(this.progressHandle);\r\n        timeline.appendChild(this.progressBar);\r\n\r\n        // Events\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n\r\n        // Time Preview\r\n        this.timePreview = this.createElement('div', 'vp-time-preview');\r\n        timeline.appendChild(this.timePreview);\r\n\r\n        // Attach events for preview\r\n        timeline.addEventListener('mousemove', this.onMouseMovePreview.bind(this));\r\n\r\n        // Attach events to the timeline element for seeking\r\n        timeline.addEventListener('mousedown', this.onMouseDown);\r\n\r\n        // Save refernece\r\n        this.timeline = timeline;\r\n\r\n        return timeline;\r\n    }\r\n\r\n    onMouseMovePreview(e) {\r\n        const rect = this.timeline.getBoundingClientRect();\r\n        const pos = (e.clientX - rect.left) / rect.width;\r\n        const time = pos * this.player.video.duration;\r\n\r\n        this.timePreview.textContent = formatTime(time);\r\n        // Position it\r\n        const previewX = e.clientX - rect.left;\r\n        this.timePreview.style.left = `${previewX}px`;\r\n        this.timePreview.style.transform = 'translateX(-50%)';\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        if (this.isDragging) return;\r\n        const percent = (this.player.video.currentTime / this.player.video.duration) * 100 || 0;\r\n        this.updateUI(percent);\r\n    }\r\n\r\n    updateUI(percent) {\r\n        this.progressBar.style.width = `${percent}%`;\r\n        // Handle moves with the end of the bar naturally if appended to it?\r\n        // If handle is absolute right: -6px of the bar, then yes.\r\n        // My CSS: .vp-progress-handle { right: -6px; top: 50%; ... }\r\n        // So just changing bar width is enough.\r\n    }\r\n\r\n    onMouseDown(e) {\r\n        this.isDragging = true;\r\n        this.updateFromEvent(e);\r\n\r\n        document.addEventListener('mousemove', this.onMouseMove);\r\n        document.addEventListener('mouseup', this.onMouseUp);\r\n\r\n        // Optional: Pause while dragging? \r\n        // this.wasPlaying = !this.player.video.paused;\r\n        // if (this.wasPlaying) this.player.pause();\r\n    }\r\n\r\n    onMouseMove(e) {\r\n        if (!this.isDragging) return;\r\n        this.updateFromEvent(e);\r\n    }\r\n\r\n    onMouseUp(e) {\r\n        if (!this.isDragging) return;\r\n        this.isDragging = false;\r\n\r\n        document.removeEventListener('mousemove', this.onMouseMove);\r\n        document.removeEventListener('mouseup', this.onMouseUp);\r\n\r\n        // Final seek\r\n        this.updateFromEvent(e);\r\n\r\n        // if (this.wasPlaying) this.player.play();\r\n    }\r\n\r\n    updateFromEvent(e) {\r\n        const rect = this.timeline.getBoundingClientRect();\r\n        let pos = (e.clientX - rect.left) / rect.width;\r\n        pos = Math.max(0, Math.min(1, pos));\r\n\r\n        this.updateUI(pos * 100);\r\n\r\n        if (this.player.video.duration) {\r\n            this.player.seek(this.player.video.duration * pos);\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class VolumeControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onInput = this.onInput.bind(this);\r\n        this.onVolumeChange = this.onVolumeChange.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-volume');\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = this.getIcon(1);\r\n        this.btn.onclick = this.onClick;\r\n\r\n        this.slider = this.createElement('input', 'vp-volume__slider');\r\n        this.slider.type = 'range';\r\n        this.slider.min = 0;\r\n        this.slider.max = 1;\r\n        this.slider.step = 0.1;\r\n        this.slider.value = 1;\r\n        this.slider.oninput = this.onInput;\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.slider);\r\n\r\n        this.player.on('volumechange', this.onVolumeChange);\r\n\r\n        return container;\r\n    }\r\n\r\n    onClick() {\r\n        if (this.player.video.muted) {\r\n            this.player.video.muted = false;\r\n            this.player.setVolume(this.lastVolume || 1);\r\n        } else {\r\n            this.lastVolume = this.player.video.volume;\r\n            this.player.video.muted = true;\r\n            this.player.setVolume(0);\r\n        }\r\n    }\r\n\r\n    onInput(e) {\r\n        this.player.setVolume(e.target.value);\r\n    }\r\n\r\n    onVolumeChange() {\r\n        const volume = this.player.video.volume;\r\n        const isMuted = this.player.video.muted || volume === 0;\r\n\r\n        this.slider.value = isMuted ? 0 : volume;\r\n        this.btn.innerHTML = this.getIcon(isMuted ? 0 : volume);\r\n    }\r\n\r\n    getIcon(level) {\r\n        if (level === 0) {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/></svg>';\r\n        } else if (level < 0.5) {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/></svg>';\r\n        } else {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M3 9v6h4l5 5V4L9 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/></svg>';\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class TimeDisplay extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-time-display');\r\n\r\n        this.currentObj = this.createElement('span');\r\n        this.currentObj.textContent = '00:00';\r\n\r\n        const divider = document.createElement('span');\r\n        divider.textContent = ' / ';\r\n\r\n        this.durationObj = this.createElement('span');\r\n        this.durationObj.textContent = '00:00';\r\n\r\n        container.appendChild(this.currentObj);\r\n        container.appendChild(divider);\r\n        container.appendChild(this.durationObj);\r\n\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n        this.player.on('loadedmetadata', this.onTimeUpdate);\r\n\r\n        return container;\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        this.currentObj.textContent = formatTime(this.player.video.currentTime);\r\n        this.durationObj.textContent = formatTime(this.player.video.duration);\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class FullscreenButton extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const btn = this.createElement('button', 'vp-button vp-button--fullscreen');\r\n        btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/></svg>';\r\n        btn.onclick = this.onClick;\r\n        return btn;\r\n    }\r\n\r\n    onClick() {\r\n        if (document.fullscreenElement) {\r\n            document.exitFullscreen();\r\n        } else {\r\n            this.player.container.requestFullscreen();\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class SpeedControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n        this.onSpeedSelect = this.onSpeedSelect.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-speed-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z\"/></svg>';\r\n        this.btn.title = 'Playback Speed';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2];\r\n        speeds.forEach(speed => {\r\n            const item = this.createElement('button', 'vp-menu-btn');\r\n            item.textContent = speed + 'x';\r\n            item.dataset.speed = speed;\r\n            if (speed === 1) item.classList.add('vp-selected');\r\n            item.onclick = (e) => this.onSpeedSelect(speed, e);\r\n            this.menu.appendChild(item);\r\n        });\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        // Close menu on click outside - basic implementation\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    onSpeedSelect(speed, e) {\r\n        this.player.video.playbackRate = speed;\r\n\r\n        // Update UI\r\n        Array.from(this.menu.children).forEach(child => child.classList.remove('vp-selected'));\r\n        e.target.classList.add('vp-selected');\r\n\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class QualityControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-quality-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M19.5 4h-15A2.5 2.5 0 0 0 2 6.5v11A2.5 2.5 0 0 0 4.5 20h15a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 19.5 4zm0 13.5h-15a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5zM7.5 15h2v-6h-2v6zm5-6v6h2V9h-2zm5 0v6h2V9h-2z\"/></svg>';\r\n        this.btn.title = 'Quality';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        // Placeholder qualities mirroring legacy options\r\n        const qualities = [\r\n            { label: 'Auto', value: 'auto' },\r\n            { label: '1080p', value: '1080p' },\r\n            { label: '720p', value: '720p' },\r\n            { label: '480p', value: '480p' }\r\n        ];\r\n\r\n        qualities.forEach(q => {\r\n            const item = this.createElement('button', 'vp-menu-btn');\r\n            item.innerHTML = `<span>${q.label}</span>${q.value === 'auto' ? '<span style=\"background:#4facfe;color:white;padding:2px 4px;border-radius:2px;font-size:10px;margin-left:5px\">AUTO</span>' : ''}`;\r\n            if (q.value === 'auto') item.classList.add('vp-selected');\r\n            item.onclick = () => this.onQualitySelect(q.value, item);\r\n            this.menu.appendChild(item);\r\n        });\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    onQualitySelect(quality, element) {\r\n        console.log('Switching quality to:', quality);\r\n        // Dispatch event for VideoPlayer or handle logic if passed options\r\n        // For now just update UI\r\n        Array.from(this.menu.children).forEach(child => child.classList.remove('vp-selected'));\r\n        element.classList.add('vp-selected');\r\n\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class Captions extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\r\n        this.tracks = {};\r\n        this.currentTrack = null;\r\n        this.cues = [];\r\n\r\n        // Mock data from legacy script for demonstration if none provided\r\n        // Real implementation would fetch URLs\r\n        this.mockCaptions = {\r\n            en: `WEBVTT\r\n\r\n00:00:00.000 --> 00:00:05.000\r\nWelcome to the enhanced video player with caption support!\r\n\r\n00:00:05.000 --> 00:00:10.000\r\nThis player features multiple subtitle languages and customizable styling.\r\n\r\n00:00:10.000 --> 00:00:15.000\r\nYou can adjust the size, color, and background of captions.`,\r\n            es: `WEBVTT\r\n\r\n00:00:00.000 --> 00:00:05.000\r\n¡Bienvenido al reproductor de video mejorado!\r\n\r\n00:00:05.000 --> 00:00:10.000\r\nEste reproductor incluye múltiples idiomas.`\r\n        };\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-captions-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H7.5v-1.5h-2v3h2V11H11v2H5.5v-4h5.5v2zM19 11h-5.5v4h2v-1.5h2v1.5h1.5v-4h-5.5v2H18v-2h-1c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z\"/></svg>';\r\n        this.btn.title = 'Captions';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        // Create Overlay for captions\r\n        this.createOverlay();\r\n\r\n        // Populate Menu\r\n        this.populateMenu();\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        // Listeners\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    createOverlay() {\r\n        this.overlay = document.createElement('div');\r\n        this.overlay.className = 'vp-captions-overlay';\r\n        this.overlay.style.display = 'none';\r\n\r\n        this.captionText = document.createElement('span');\r\n        this.captionText.className = 'vp-caption-text';\r\n\r\n        this.overlay.appendChild(this.captionText);\r\n\r\n        // Append to player container (parent of controls usually)\r\n        // We defer this slightly to ensure player.container is ready/accessible\r\n        // But controls is mounted in player.container, so this.player.container should be the root.\r\n        this.player.container.appendChild(this.overlay);\r\n    }\r\n\r\n    populateMenu() {\r\n        // Off option\r\n        const offBtn = this.createElement('button', 'vp-menu-btn');\r\n        offBtn.textContent = 'Off';\r\n        offBtn.onclick = () => this.setTrack(null);\r\n        if (!this.currentTrack) offBtn.classList.add('vp-selected');\r\n        this.menu.appendChild(offBtn);\r\n\r\n        // Mock tracks\r\n        ['en', 'es'].forEach(lang => {\r\n            const btn = this.createElement('button', 'vp-menu-btn');\r\n            btn.textContent = lang.toUpperCase();\r\n            btn.dataset.lang = lang;\r\n            btn.onclick = (e) => {\r\n                this.setTrack(lang);\r\n                Array.from(this.menu.children).forEach(c => c.classList.remove('vp-selected'));\r\n                e.target.classList.add('vp-selected');\r\n                // Remove selected from 'Off'\r\n                offBtn.classList.remove('vp-selected');\r\n            };\r\n            this.menu.appendChild(btn);\r\n\r\n            // Parse immediately for mock\r\n            this.tracks[lang] = this.parseVTT(this.mockCaptions[lang]);\r\n        });\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    setTrack(lang) {\r\n        this.currentTrack = lang;\r\n        if (lang) {\r\n            this.cues = this.tracks[lang];\r\n            this.overlay.style.display = 'block';\r\n            this.btn.classList.add('vp-button--active');\r\n        } else {\r\n            this.cues = [];\r\n            this.overlay.style.display = 'none';\r\n            this.btn.classList.remove('vp-button--active');\r\n        }\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        if (!this.currentTrack || !this.cues.length) return;\r\n\r\n        const time = this.player.video.currentTime;\r\n        const activeCue = this.cues.find(cue => time >= cue.startTime && time <= cue.endTime);\r\n\r\n        if (activeCue) {\r\n            this.captionText.textContent = activeCue.text;\r\n            this.captionText.style.display = 'inline-block';\r\n        } else {\r\n            this.captionText.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    parseVTT(vttContent) {\r\n        const lines = vttContent.split('\\n').filter(line => line.trim());\r\n        const cues = [];\r\n        let currentCue = null;\r\n\r\n        for (let i = 0; i < lines.length; i++) {\r\n            const line = lines[i].trim();\r\n            if (line === 'WEBVTT') continue;\r\n\r\n            if (line.includes('-->')) {\r\n                const [start, end] = line.split('-->').map(t => t.trim());\r\n                currentCue = {\r\n                    startTime: this.parseTimeStamp(start),\r\n                    endTime: this.parseTimeStamp(end),\r\n                    text: ''\r\n                };\r\n            } else if (currentCue && line) {\r\n                currentCue.text += (currentCue.text ? ' ' : '') + line;\r\n                if (i === lines.length - 1 || lines[i + 1].includes('-->') || !lines[i + 1].trim()) {\r\n                    cues.push(currentCue);\r\n                    currentCue = null;\r\n                }\r\n            }\r\n        }\r\n        return cues;\r\n    }\r\n\r\n    parseTimeStamp(timeStr) {\r\n        const parts = timeStr.split(':');\r\n        const seconds = parts[parts.length - 1].split('.');\r\n        const s = parseInt(seconds[0]) + (parseInt(seconds[1] || 0) / 1000);\r\n\r\n        if (parts.length === 3) {\r\n            return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + s;\r\n        } else {\r\n            return parseInt(parts[0]) * 60 + s;\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport PlayButton from './PlayButton';\r\nimport ProgressBar from './ProgressBar';\r\nimport VolumeControl from './VolumeControl';\r\nimport TimeDisplay from './TimeDisplay';\r\nimport FullscreenButton from './FullscreenButton';\r\nimport SettingsMenu from './SettingsMenu';\r\nimport SpeedControl from './SpeedControl';\r\nimport QualityControl from './QualityControl';\r\nimport Captions from './Captions';\r\n\r\nexport default class Controls extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n    }\r\n\r\n    create() {\r\n        const controls = this.createElement('div', 'vp-player__controls');\r\n\r\n        // 1. Timeline Container (Top)\r\n        const timelineContainer = this.createElement('div', 'vp-timeline-container');\r\n\r\n        const progressBar = new ProgressBar(this.player);\r\n        progressBar.mount(timelineContainer);\r\n\r\n        controls.appendChild(timelineContainer);\r\n\r\n        // 2. Controls Row (Bottom)\r\n        const controlsRow = this.createElement('div', 'vp-controls-row');\r\n        controls.appendChild(controlsRow);\r\n\r\n        // -- Left Controls (Volume, Time)\r\n        const leftControls = this.createElement('div', 'vp-controls-left');\r\n        controlsRow.appendChild(leftControls);\r\n\r\n        const playBtn = new PlayButton(this.player); // Moving Play to Center optionally, but legacy has it in center usually? \r\n        // Legacy CSS says: .controls-center { flex: 0 0 auto } which implies Play might be there.\r\n        // Legacy script Step 10 HTML: \r\n        // controls-center: skip-backward, play-pause, skip-forward.\r\n        // controls-left: volume, time.\r\n        // controls-right: captions, quality, speed, pip, fullscreen.\r\n\r\n        // Actually, let's follow that exactly.\r\n\r\n        // Volume\r\n        const volumeControl = new VolumeControl(this.player);\r\n        volumeControl.mount(leftControls);\r\n\r\n        // Time\r\n        const timeDisplay = new TimeDisplay(this.player);\r\n        timeDisplay.mount(leftControls);\r\n\r\n        // -- Center Controls (Skip, Play, Skip)\r\n        const centerControls = this.createElement('div', 'vp-controls-center');\r\n        controlsRow.appendChild(centerControls);\r\n\r\n        // TODO: Add Skip Buttons later\r\n        playBtn.mount(centerControls);\r\n\r\n        // -- Right Controls (Quality, Speed, Settings, Fullscreen)\r\n        const rightControls = this.createElement('div', 'vp-controls-right');\r\n        controlsRow.appendChild(rightControls);\r\n\r\n        const qualityControl = new QualityControl(this.player);\r\n        qualityControl.mount(rightControls);\r\n\r\n        const captions = new Captions(this.player);\r\n        captions.mount(rightControls);\r\n\r\n        const speedControl = new SpeedControl(this.player);\r\n        speedControl.mount(rightControls);\r\n\r\n        // Settings Menu (General) - keeping it but maybe legacy didn't have both?\r\n        // Legacy has: qualityBtn, speedBtn, captionsBtn, pipBtn, fullscreenBtn.\r\n        // It does NOT have a generic 'settings' gear in the same way, but let's keep it or remove if redundant.\r\n        // The requester said \"use... behaviors from components\".\r\n        // I'll keep generic settings as per my specific instruction earlier, but maybe I should have removed it if it wasn't in legacy.\r\n        // Actually legacy script has \"speedMenu\", \"qualityMenu\".\r\n        // I will stick to adding Speed and Quality specifically.\r\n\r\n        const fullscreenBtn = new FullscreenButton(this.player);\r\n        fullscreenBtn.mount(rightControls);\r\n\r\n        return controls;\r\n    }\r\n}\r\n","import EventEmitter from './Events';\r\nimport Controls from '../components/Controls';\r\n\r\nexport default class VideoPlayer extends EventEmitter {\r\n    constructor(config) {\r\n        super();\r\n        this.config = {\r\n            controls: true,\r\n            autoplay: false,\r\n            theme: 'dark',\r\n            ...config\r\n        };\r\n\r\n        this.container = typeof this.config.container === 'string'\r\n            ? document.querySelector(this.config.container)\r\n            : this.config.container;\r\n\r\n        if (!this.container) {\r\n            throw new Error('VideoPlayer: Container not found');\r\n        }\r\n\r\n        this.video = null;\r\n        this.controls = null;\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.container.classList.add('vp-player');\r\n\r\n        // Setup Video Element\r\n        const existingVideo = this.container.querySelector('video');\r\n        if (existingVideo) {\r\n            this.video = existingVideo;\r\n            this.video.classList.add('vp-player__video');\r\n            // Allow config to override/set src if not present\r\n            if (this.config.src) this.video.src = this.config.src;\r\n            if (this.config.autoplay) this.video.autoplay = true;\r\n        } else {\r\n            this.video = document.createElement('video');\r\n            this.video.className = 'vp-player__video';\r\n            if (this.config.src) this.video.src = this.config.src;\r\n            if (this.config.autoplay) this.video.autoplay = true;\r\n            this.container.appendChild(this.video);\r\n        }\r\n\r\n        // Mount Controls\r\n        if (this.config.controls) {\r\n            this.controlsComponent = new Controls(this);\r\n            this.controlsComponent.mount(this.container);\r\n        }\r\n\r\n        // Event Listeners\r\n        this.attachEvents();\r\n\r\n        // Initial state\r\n        this.showControls();\r\n    }\r\n\r\n    attachEvents() {\r\n        // Video Events\r\n        this.video.addEventListener('play', () => {\r\n            this.emit('play');\r\n            this.hideControlsDelayed();\r\n        });\r\n\r\n        this.video.addEventListener('pause', () => {\r\n            this.emit('pause');\r\n            this.showControls();\r\n        });\r\n\r\n        this.video.addEventListener('ended', () => {\r\n            this.emit('ended');\r\n            this.showControls();\r\n        });\r\n\r\n        this.video.addEventListener('timeupdate', () => this.emit('timeupdate'));\r\n        this.video.addEventListener('volumechange', () => this.emit('volumechange'));\r\n        this.video.addEventListener('loadedmetadata', () => this.emit('loadedmetadata'));\r\n\r\n        // Mouse Interaction for Controls\r\n        this.container.addEventListener('mouseenter', () => this.showControls());\r\n        this.container.addEventListener('mouseleave', () => this.hideControlsDelayed());\r\n        this.container.addEventListener('mousemove', () => {\r\n            this.showControls();\r\n            this.hideControlsDelayed();\r\n        });\r\n\r\n        // Click to toggle play\r\n        this.video.addEventListener('click', () => this.togglePlay());\r\n    }\r\n\r\n    showControls() {\r\n        this.container.classList.add('vp-show-controls');\r\n        if (this.controlsTimeout) clearTimeout(this.controlsTimeout);\r\n    }\r\n\r\n    hideControlsDelayed() {\r\n        if (this.video.paused) return; // Keep controls visible if paused\r\n\r\n        if (this.controlsTimeout) clearTimeout(this.controlsTimeout);\r\n        this.controlsTimeout = setTimeout(() => {\r\n            this.container.classList.remove('vp-show-controls');\r\n        }, 3000);\r\n    }\r\n\r\n    play() {\r\n        return this.video.play();\r\n    }\r\n\r\n    pause() {\r\n        this.video.pause();\r\n    }\r\n\r\n    seek(time) {\r\n        this.video.currentTime = time;\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.video.volume = Math.max(0, Math.min(1, volume));\r\n        this.video.muted = (volume === 0);\r\n    }\r\n\r\n    togglePlay() {\r\n        if (this.video.paused) {\r\n            this.play();\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.video.remove();\r\n        if (this.controls) this.controls.destroy();\r\n        this.container.innerHTML = '';\r\n    }\r\n}\r\n"],"names":["EventEmitter","_createClass","_classCallCheck","this","events","key","value","event","listener","_this","push","off","listenerToRemove","filter","_len","arguments","length","args","Array","_key","forEach","apply","_this2","on","Component","player","el","Error","container","create","appendChild","parentNode","removeChild","tag","className","document","createElement","PlayButton","_Component","_callSuper","onClick","bind","onPlay","onPause","_inherits","btn","innerHTML","getIcon","onclick","togglePlay","classList","add","remove","isPlaying","formatTime","seconds","isNaN","date","Date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","toString","padStart","concat","ProgressBar","isDragging","onTimeUpdate","onMouseDown","onMouseMove","onMouseUp","timeline","progressBar","progressHandle","timePreview","addEventListener","onMouseMovePreview","e","rect","getBoundingClientRect","time","clientX","left","width","video","duration","textContent","previewX","style","transform","percent","currentTime","updateUI","updateFromEvent","removeEventListener","pos","Math","max","min","seek","VolumeControl","onInput","onVolumeChange","slider","type","step","oninput","muted","setVolume","lastVolume","volume","target","isMuted","level","TimeDisplay","currentObj","divider","durationObj","FullscreenButton","fullscreenElement","exitFullscreen","requestFullscreen","SpeedControl","toggleMenu","onSpeedSelect","position","title","menu","speed","item","dataset","contains","toggle","playbackRate","from","children","child","QualityControl","label","q","onQualitySelect","quality","element","console","log","Captions","tracks","currentTrack","cues","mockCaptions","en","es","createOverlay","populateMenu","overlay","display","captionText","_this3","offBtn","setTrack","lang","toUpperCase","c","parseVTT","activeCue","find","cue","startTime","endTime","text","vttContent","lines","split","line","trim","currentCue","i","includes","_line$split$map2","_slicedToArray","map","t","start","end","parseTimeStamp","timeStr","parts","s","parseInt","Controls","controls","timelineContainer","mount","controlsRow","leftControls","playBtn","centerControls","rightControls","VideoPlayer","_EventEmitter","config","_objectSpread","autoplay","theme","querySelector","init","existingVideo","src","controlsComponent","attachEvents","showControls","emit","hideControlsDelayed","controlsTimeout","clearTimeout","paused","setTimeout","play","pause","destroy"],"mappings":"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"}