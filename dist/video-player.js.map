{"version":3,"file":"video-player.js","sources":["../src/core/Events.js","../src/components/Component.js","../src/components/PlayButton.js","../src/utils/time.js","../src/components/ProgressBar.js","../src/components/VolumeControl.js","../src/components/TimeDisplay.js","../src/components/FullscreenButton.js","../src/components/SpeedControl.js","../src/components/QualityControl.js","../src/components/Captions.js","../src/components/Controls.js","../src/core/VideoPlayer.js"],"sourcesContent":["/**\r\n * Simple Pub/Sub Event System\r\n */\r\nexport default class EventEmitter {\r\n    constructor() {\r\n        this.events = {};\r\n    }\r\n\r\n    on(event, listener) {\r\n        if (!this.events[event]) {\r\n            this.events[event] = [];\r\n        }\r\n        this.events[event].push(listener);\r\n        return () => this.off(event, listener);\r\n    }\r\n\r\n    off(event, listenerToRemove) {\r\n        if (!this.events[event]) return;\r\n        this.events[event] = this.events[event].filter(listener => listener !== listenerToRemove);\r\n    }\r\n\r\n    emit(event, ...args) {\r\n        if (!this.events[event]) return;\r\n        this.events[event].forEach(listener => listener(...args));\r\n    }\r\n\r\n    // Allow multiple events to be registered at once\r\n    onAny(events, listener) {\r\n        events.forEach(event => this.on(event, listener));\r\n    }\r\n}\r\n","/**\r\n * Base Component Class\r\n */\r\nexport default class Component {\r\n    constructor(player) {\r\n        this.player = player;\r\n        this.el = null;\r\n    }\r\n\r\n    /**\r\n     * Create the DOM element for this component\r\n     * @returns {HTMLElement}\r\n     */\r\n    create() {\r\n        throw new Error('Component must implement create() method');\r\n    }\r\n\r\n    /**\r\n     * Mount the component to a container\r\n     * @param {HTMLElement} container\r\n     */\r\n    mount(container) {\r\n        if (!this.el) {\r\n            this.el = this.create();\r\n        }\r\n        container.appendChild(this.el);\r\n    }\r\n\r\n    /**\r\n     * Destroy the component and remove from DOM\r\n     */\r\n    destroy() {\r\n        if (this.el && this.el.parentNode) {\r\n            this.el.parentNode.removeChild(this.el);\r\n        }\r\n        this.el = null;\r\n    }\r\n\r\n    /**\r\n     * Utility to create an element with class name\r\n     * @param {string} tag \r\n     * @param {string} className \r\n     * @returns {HTMLElement}\r\n     */\r\n    createElement(tag, className) {\r\n        const el = document.createElement(tag);\r\n        if (className) el.className = className;\r\n        return el;\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class PlayButton extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onPlay = this.onPlay.bind(this);\r\n        this.onPause = this.onPause.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const btn = this.createElement('button', 'vp-button vp-button--play');\r\n        btn.innerHTML = this.getIcon(false);\r\n\r\n        btn.onclick = this.onClick;\r\n\r\n        // Listen to player state changes\r\n        this.player.on('play', this.onPlay);\r\n        this.player.on('pause', this.onPause);\r\n\r\n        return btn;\r\n    }\r\n\r\n    onClick() {\r\n        this.player.togglePlay();\r\n    }\r\n\r\n    onPlay() {\r\n        this.el.innerHTML = this.getIcon(true);\r\n        this.el.classList.add('vp-button--active');\r\n    }\r\n\r\n    onPause() {\r\n        this.el.innerHTML = this.getIcon(false);\r\n        this.el.classList.remove('vp-button--active');\r\n    }\r\n\r\n    getIcon(isPlaying) {\r\n        return isPlaying\r\n            ? '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"/></svg>' // Pause icon\r\n            : '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M8 5v14l11-7z\"/></svg>'; // Play icon\r\n    }\r\n}\r\n","export function formatTime(seconds) {\r\n    if (isNaN(seconds)) return '00:00';\r\n\r\n    const date = new Date(seconds * 1000);\r\n    const hh = date.getUTCHours();\r\n    const mm = date.getUTCMinutes();\r\n    const ss = date.getUTCSeconds().toString().padStart(2, '0');\r\n\r\n    if (hh) {\r\n        return `${hh}:${mm.toString().padStart(2, '0')}:${ss}`;\r\n    }\r\n    return `${mm}:${ss}`;\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class ProgressBar extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.isDragging = false;\r\n\r\n        // Bind methods\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n    }\r\n\r\n    create() {\r\n        // The mounting point (in Controls.js) is .vp-timeline-container\r\n        // So here we create .vp-timeline\r\n        const timeline = this.createElement('div', 'vp-timeline');\r\n\r\n        this.progressBar = this.createElement('div', 'vp-progress-bar');\r\n\r\n        // Handle is just visual in legacy CSS (pseudo-element on progress-bar::after)\r\n        // But here we might want an explicit element or stick to CSS.\r\n        // Legacy CSS used: .progress-bar::after for handle.\r\n        // My controls.css uses: .vp-progress-handle element.\r\n        this.progressHandle = this.createElement('div', 'vp-progress-handle');\r\n\r\n        this.progressBar.appendChild(this.progressHandle);\r\n        timeline.appendChild(this.progressBar);\r\n\r\n        // Events\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n\r\n        // Time Preview\r\n        this.timePreview = this.createElement('div', 'vp-time-preview');\r\n        timeline.appendChild(this.timePreview);\r\n\r\n        // Attach events for preview\r\n        timeline.addEventListener('mousemove', this.onMouseMovePreview.bind(this));\r\n\r\n        // Attach events to the timeline element for seeking\r\n        timeline.addEventListener('mousedown', this.onMouseDown);\r\n\r\n        // Save refernece\r\n        this.timeline = timeline;\r\n\r\n        return timeline;\r\n    }\r\n\r\n    onMouseMovePreview(e) {\r\n        const rect = this.timeline.getBoundingClientRect();\r\n        const pos = (e.clientX - rect.left) / rect.width;\r\n        const time = pos * this.player.video.duration;\r\n\r\n        this.timePreview.textContent = formatTime(time);\r\n        // Position it\r\n        const previewX = e.clientX - rect.left;\r\n        this.timePreview.style.left = `${previewX}px`;\r\n        this.timePreview.style.transform = 'translateX(-50%)';\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        if (this.isDragging) return;\r\n        const percent = (this.player.video.currentTime / this.player.video.duration) * 100 || 0;\r\n        this.updateUI(percent);\r\n    }\r\n\r\n    updateUI(percent) {\r\n        this.progressBar.style.width = `${percent}%`;\r\n        // Handle moves with the end of the bar naturally if appended to it?\r\n        // If handle is absolute right: -6px of the bar, then yes.\r\n        // My CSS: .vp-progress-handle { right: -6px; top: 50%; ... }\r\n        // So just changing bar width is enough.\r\n    }\r\n\r\n    onMouseDown(e) {\r\n        this.isDragging = true;\r\n        this.updateFromEvent(e);\r\n\r\n        document.addEventListener('mousemove', this.onMouseMove);\r\n        document.addEventListener('mouseup', this.onMouseUp);\r\n\r\n        // Optional: Pause while dragging? \r\n        // this.wasPlaying = !this.player.video.paused;\r\n        // if (this.wasPlaying) this.player.pause();\r\n    }\r\n\r\n    onMouseMove(e) {\r\n        if (!this.isDragging) return;\r\n        this.updateFromEvent(e);\r\n    }\r\n\r\n    onMouseUp(e) {\r\n        if (!this.isDragging) return;\r\n        this.isDragging = false;\r\n\r\n        document.removeEventListener('mousemove', this.onMouseMove);\r\n        document.removeEventListener('mouseup', this.onMouseUp);\r\n\r\n        // Final seek\r\n        this.updateFromEvent(e);\r\n\r\n        // if (this.wasPlaying) this.player.play();\r\n    }\r\n\r\n    updateFromEvent(e) {\r\n        const rect = this.timeline.getBoundingClientRect();\r\n        let pos = (e.clientX - rect.left) / rect.width;\r\n        pos = Math.max(0, Math.min(1, pos));\r\n\r\n        this.updateUI(pos * 100);\r\n\r\n        if (this.player.video.duration) {\r\n            this.player.seek(this.player.video.duration * pos);\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class VolumeControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onInput = this.onInput.bind(this);\r\n        this.onVolumeChange = this.onVolumeChange.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-volume');\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = this.getIcon(1);\r\n        this.btn.onclick = this.onClick;\r\n\r\n        this.slider = this.createElement('input', 'vp-volume__slider');\r\n        this.slider.type = 'range';\r\n        this.slider.min = 0;\r\n        this.slider.max = 1;\r\n        this.slider.step = 0.1;\r\n        this.slider.value = 1;\r\n        this.slider.oninput = this.onInput;\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.slider);\r\n\r\n        this.player.on('volumechange', this.onVolumeChange);\r\n\r\n        return container;\r\n    }\r\n\r\n    onClick() {\r\n        if (this.player.video.muted) {\r\n            this.player.video.muted = false;\r\n            this.player.setVolume(this.lastVolume || 1);\r\n        } else {\r\n            this.lastVolume = this.player.video.volume;\r\n            this.player.video.muted = true;\r\n            this.player.setVolume(0);\r\n        }\r\n    }\r\n\r\n    onInput(e) {\r\n        this.player.setVolume(e.target.value);\r\n    }\r\n\r\n    onVolumeChange() {\r\n        const volume = this.player.video.volume;\r\n        const isMuted = this.player.video.muted || volume === 0;\r\n\r\n        this.slider.value = isMuted ? 0 : volume;\r\n        this.btn.innerHTML = this.getIcon(isMuted ? 0 : volume);\r\n    }\r\n\r\n    getIcon(level) {\r\n        if (level === 0) {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z\"/></svg>';\r\n        } else if (level < 0.5) {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"/></svg>';\r\n        } else {\r\n            return '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M3 9v6h4l5 5V4L9 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"/></svg>';\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class TimeDisplay extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-time-display');\r\n\r\n        this.currentObj = this.createElement('span');\r\n        this.currentObj.textContent = '00:00';\r\n\r\n        const divider = document.createElement('span');\r\n        divider.textContent = ' / ';\r\n\r\n        this.durationObj = this.createElement('span');\r\n        this.durationObj.textContent = '00:00';\r\n\r\n        container.appendChild(this.currentObj);\r\n        container.appendChild(divider);\r\n        container.appendChild(this.durationObj);\r\n\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n        this.player.on('loadedmetadata', this.onTimeUpdate);\r\n\r\n        return container;\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        this.currentObj.textContent = formatTime(this.player.video.currentTime);\r\n        this.durationObj.textContent = formatTime(this.player.video.duration);\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class FullscreenButton extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const btn = this.createElement('button', 'vp-button vp-button--fullscreen');\r\n        btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/></svg>';\r\n        btn.onclick = this.onClick;\r\n        return btn;\r\n    }\r\n\r\n    onClick() {\r\n        if (document.fullscreenElement) {\r\n            document.exitFullscreen();\r\n        } else {\r\n            this.player.container.requestFullscreen();\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class SpeedControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n        this.onSpeedSelect = this.onSpeedSelect.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-speed-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z\"/></svg>';\r\n        this.btn.title = 'Playback Speed';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2];\r\n        speeds.forEach(speed => {\r\n            const item = this.createElement('button', 'vp-menu-btn');\r\n            item.textContent = speed + 'x';\r\n            item.dataset.speed = speed;\r\n            if (speed === 1) item.classList.add('vp-selected');\r\n            item.onclick = (e) => this.onSpeedSelect(speed, e);\r\n            this.menu.appendChild(item);\r\n        });\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        // Close menu on click outside - basic implementation\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    onSpeedSelect(speed, e) {\r\n        this.player.video.playbackRate = speed;\r\n\r\n        // Update UI\r\n        Array.from(this.menu.children).forEach(child => child.classList.remove('vp-selected'));\r\n        e.target.classList.add('vp-selected');\r\n\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n}\r\n","import Component from './Component';\r\n\r\nexport default class QualityControl extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-quality-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M19.5 4h-15A2.5 2.5 0 0 0 2 6.5v11A2.5 2.5 0 0 0 4.5 20h15a2.5 2.5 0 0 0 2.5-2.5v-11A2.5 2.5 0 0 0 19.5 4zm0 13.5h-15a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5h15a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5zM7.5 15h2v-6h-2v6zm5-6v6h2V9h-2zm5 0v6h2V9h-2z\"/></svg>';\r\n        this.btn.title = 'Quality';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        // Placeholder qualities mirroring legacy options\r\n        const qualities = [\r\n            { label: 'Auto', value: 'auto' },\r\n            { label: '1080p', value: '1080p' },\r\n            { label: '720p', value: '720p' },\r\n            { label: '480p', value: '480p' }\r\n        ];\r\n\r\n        qualities.forEach(q => {\r\n            const item = this.createElement('button', 'vp-menu-btn');\r\n            item.innerHTML = `<span>${q.label}</span>${q.value === 'auto' ? '<span style=\"background:#4facfe;color:white;padding:2px 4px;border-radius:2px;font-size:10px;margin-left:5px\">AUTO</span>' : ''}`;\r\n            if (q.value === 'auto') item.classList.add('vp-selected');\r\n            item.onclick = () => this.onQualitySelect(q.value, item);\r\n            this.menu.appendChild(item);\r\n        });\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    onQualitySelect(quality, element) {\r\n        console.log('Switching quality to:', quality);\r\n        // Dispatch event for VideoPlayer or handle logic if passed options\r\n        // For now just update UI\r\n        Array.from(this.menu.children).forEach(child => child.classList.remove('vp-selected'));\r\n        element.classList.add('vp-selected');\r\n\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport { formatTime } from '../utils/time';\r\n\r\nexport default class Captions extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n        this.toggleMenu = this.toggleMenu.bind(this);\r\n        this.onTimeUpdate = this.onTimeUpdate.bind(this);\r\n\r\n        this.tracks = {};\r\n        this.currentTrack = null;\r\n        this.cues = [];\r\n\r\n        // Mock data from legacy script for demonstration if none provided\r\n        // Real implementation would fetch URLs\r\n        this.mockCaptions = {\r\n            en: `WEBVTT\r\n\r\n00:00:00.000 --> 00:00:05.000\r\nWelcome to the enhanced video player with caption support!\r\n\r\n00:00:05.000 --> 00:00:10.000\r\nThis player features multiple subtitle languages and customizable styling.\r\n\r\n00:00:10.000 --> 00:00:15.000\r\nYou can adjust the size, color, and background of captions.`,\r\n            es: `WEBVTT\r\n\r\n00:00:00.000 --> 00:00:05.000\r\n¡Bienvenido al reproductor de video mejorado!\r\n\r\n00:00:05.000 --> 00:00:10.000\r\nEste reproductor incluye múltiples idiomas.`\r\n        };\r\n    }\r\n\r\n    create() {\r\n        const container = this.createElement('div', 'vp-captions-control');\r\n        container.style.position = 'relative';\r\n\r\n        this.btn = this.createElement('button', 'vp-button');\r\n        this.btn.innerHTML = '<svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"currentColor\" d=\"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H7.5v-1.5h-2v3h2V11H11v2H5.5v-4h5.5v2zM19 11h-5.5v4h2v-1.5h2v1.5h1.5v-4h-5.5v2H18v-2h-1c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z\"/></svg>';\r\n        this.btn.title = 'Captions';\r\n        this.btn.onclick = this.toggleMenu;\r\n\r\n        this.menu = this.createElement('div', 'vp-menu');\r\n\r\n        // Create Overlay for captions\r\n        this.createOverlay();\r\n\r\n        // Populate Menu\r\n        this.populateMenu();\r\n\r\n        container.appendChild(this.btn);\r\n        container.appendChild(this.menu);\r\n\r\n        // Listeners\r\n        this.player.on('timeupdate', this.onTimeUpdate);\r\n\r\n        document.addEventListener('click', (e) => {\r\n            if (!container.contains(e.target)) {\r\n                this.menu.classList.remove('vp-active');\r\n            }\r\n        });\r\n\r\n        return container;\r\n    }\r\n\r\n    createOverlay() {\r\n        this.overlay = document.createElement('div');\r\n        this.overlay.className = 'vp-captions-overlay';\r\n        this.overlay.style.display = 'none';\r\n\r\n        this.captionText = document.createElement('span');\r\n        this.captionText.className = 'vp-caption-text';\r\n\r\n        this.overlay.appendChild(this.captionText);\r\n\r\n        // Append to player container (parent of controls usually)\r\n        // We defer this slightly to ensure player.container is ready/accessible\r\n        // But controls is mounted in player.container, so this.player.container should be the root.\r\n        this.player.container.appendChild(this.overlay);\r\n    }\r\n\r\n    populateMenu() {\r\n        // Off option\r\n        const offBtn = this.createElement('button', 'vp-menu-btn');\r\n        offBtn.textContent = 'Off';\r\n        offBtn.onclick = () => this.setTrack(null);\r\n        if (!this.currentTrack) offBtn.classList.add('vp-selected');\r\n        this.menu.appendChild(offBtn);\r\n\r\n        // Mock tracks\r\n        ['en', 'es'].forEach(lang => {\r\n            const btn = this.createElement('button', 'vp-menu-btn');\r\n            btn.textContent = lang.toUpperCase();\r\n            btn.dataset.lang = lang;\r\n            btn.onclick = (e) => {\r\n                this.setTrack(lang);\r\n                Array.from(this.menu.children).forEach(c => c.classList.remove('vp-selected'));\r\n                e.target.classList.add('vp-selected');\r\n                // Remove selected from 'Off'\r\n                offBtn.classList.remove('vp-selected');\r\n            };\r\n            this.menu.appendChild(btn);\r\n\r\n            // Parse immediately for mock\r\n            this.tracks[lang] = this.parseVTT(this.mockCaptions[lang]);\r\n        });\r\n    }\r\n\r\n    toggleMenu() {\r\n        this.menu.classList.toggle('vp-active');\r\n    }\r\n\r\n    setTrack(lang) {\r\n        this.currentTrack = lang;\r\n        if (lang) {\r\n            this.cues = this.tracks[lang];\r\n            this.overlay.style.display = 'block';\r\n            this.btn.classList.add('vp-button--active');\r\n        } else {\r\n            this.cues = [];\r\n            this.overlay.style.display = 'none';\r\n            this.btn.classList.remove('vp-button--active');\r\n        }\r\n        this.menu.classList.remove('vp-active');\r\n    }\r\n\r\n    onTimeUpdate() {\r\n        if (!this.currentTrack || !this.cues.length) return;\r\n\r\n        const time = this.player.video.currentTime;\r\n        const activeCue = this.cues.find(cue => time >= cue.startTime && time <= cue.endTime);\r\n\r\n        if (activeCue) {\r\n            this.captionText.textContent = activeCue.text;\r\n            this.captionText.style.display = 'inline-block';\r\n        } else {\r\n            this.captionText.style.display = 'none';\r\n        }\r\n    }\r\n\r\n    parseVTT(vttContent) {\r\n        const lines = vttContent.split('\\n').filter(line => line.trim());\r\n        const cues = [];\r\n        let currentCue = null;\r\n\r\n        for (let i = 0; i < lines.length; i++) {\r\n            const line = lines[i].trim();\r\n            if (line === 'WEBVTT') continue;\r\n\r\n            if (line.includes('-->')) {\r\n                const [start, end] = line.split('-->').map(t => t.trim());\r\n                currentCue = {\r\n                    startTime: this.parseTimeStamp(start),\r\n                    endTime: this.parseTimeStamp(end),\r\n                    text: ''\r\n                };\r\n            } else if (currentCue && line) {\r\n                currentCue.text += (currentCue.text ? ' ' : '') + line;\r\n                if (i === lines.length - 1 || lines[i + 1].includes('-->') || !lines[i + 1].trim()) {\r\n                    cues.push(currentCue);\r\n                    currentCue = null;\r\n                }\r\n            }\r\n        }\r\n        return cues;\r\n    }\r\n\r\n    parseTimeStamp(timeStr) {\r\n        const parts = timeStr.split(':');\r\n        const seconds = parts[parts.length - 1].split('.');\r\n        const s = parseInt(seconds[0]) + (parseInt(seconds[1] || 0) / 1000);\r\n\r\n        if (parts.length === 3) {\r\n            return parseInt(parts[0]) * 3600 + parseInt(parts[1]) * 60 + s;\r\n        } else {\r\n            return parseInt(parts[0]) * 60 + s;\r\n        }\r\n    }\r\n}\r\n","import Component from './Component';\r\nimport PlayButton from './PlayButton';\r\nimport ProgressBar from './ProgressBar';\r\nimport VolumeControl from './VolumeControl';\r\nimport TimeDisplay from './TimeDisplay';\r\nimport FullscreenButton from './FullscreenButton';\r\nimport SettingsMenu from './SettingsMenu';\r\nimport SpeedControl from './SpeedControl';\r\nimport QualityControl from './QualityControl';\r\nimport Captions from './Captions';\r\n\r\nexport default class Controls extends Component {\r\n    constructor(player) {\r\n        super(player);\r\n    }\r\n\r\n    create() {\r\n        const controls = this.createElement('div', 'vp-player__controls');\r\n\r\n        // 1. Timeline Container (Top)\r\n        const timelineContainer = this.createElement('div', 'vp-timeline-container');\r\n\r\n        const progressBar = new ProgressBar(this.player);\r\n        progressBar.mount(timelineContainer);\r\n\r\n        controls.appendChild(timelineContainer);\r\n\r\n        // 2. Controls Row (Bottom)\r\n        const controlsRow = this.createElement('div', 'vp-controls-row');\r\n        controls.appendChild(controlsRow);\r\n\r\n        // -- Left Controls (Volume, Time)\r\n        const leftControls = this.createElement('div', 'vp-controls-left');\r\n        controlsRow.appendChild(leftControls);\r\n\r\n        const playBtn = new PlayButton(this.player); // Moving Play to Center optionally, but legacy has it in center usually? \r\n        // Legacy CSS says: .controls-center { flex: 0 0 auto } which implies Play might be there.\r\n        // Legacy script Step 10 HTML: \r\n        // controls-center: skip-backward, play-pause, skip-forward.\r\n        // controls-left: volume, time.\r\n        // controls-right: captions, quality, speed, pip, fullscreen.\r\n\r\n        // Actually, let's follow that exactly.\r\n\r\n        // Volume\r\n        const volumeControl = new VolumeControl(this.player);\r\n        volumeControl.mount(leftControls);\r\n\r\n        // Time\r\n        const timeDisplay = new TimeDisplay(this.player);\r\n        timeDisplay.mount(leftControls);\r\n\r\n        // -- Center Controls (Skip, Play, Skip)\r\n        const centerControls = this.createElement('div', 'vp-controls-center');\r\n        controlsRow.appendChild(centerControls);\r\n\r\n        // TODO: Add Skip Buttons later\r\n        playBtn.mount(centerControls);\r\n\r\n        // -- Right Controls (Quality, Speed, Settings, Fullscreen)\r\n        const rightControls = this.createElement('div', 'vp-controls-right');\r\n        controlsRow.appendChild(rightControls);\r\n\r\n        const qualityControl = new QualityControl(this.player);\r\n        qualityControl.mount(rightControls);\r\n\r\n        const captions = new Captions(this.player);\r\n        captions.mount(rightControls);\r\n\r\n        const speedControl = new SpeedControl(this.player);\r\n        speedControl.mount(rightControls);\r\n\r\n        // Settings Menu (General) - keeping it but maybe legacy didn't have both?\r\n        // Legacy has: qualityBtn, speedBtn, captionsBtn, pipBtn, fullscreenBtn.\r\n        // It does NOT have a generic 'settings' gear in the same way, but let's keep it or remove if redundant.\r\n        // The requester said \"use... behaviors from components\".\r\n        // I'll keep generic settings as per my specific instruction earlier, but maybe I should have removed it if it wasn't in legacy.\r\n        // Actually legacy script has \"speedMenu\", \"qualityMenu\".\r\n        // I will stick to adding Speed and Quality specifically.\r\n\r\n        const fullscreenBtn = new FullscreenButton(this.player);\r\n        fullscreenBtn.mount(rightControls);\r\n\r\n        return controls;\r\n    }\r\n}\r\n","import EventEmitter from './Events';\r\nimport Controls from '../components/Controls';\r\n\r\nexport default class VideoPlayer extends EventEmitter {\r\n    constructor(config) {\r\n        super();\r\n        this.config = {\r\n            controls: true,\r\n            autoplay: false,\r\n            theme: 'dark',\r\n            ...config\r\n        };\r\n\r\n        this.container = typeof this.config.container === 'string'\r\n            ? document.querySelector(this.config.container)\r\n            : this.config.container;\r\n\r\n        if (!this.container) {\r\n            throw new Error('VideoPlayer: Container not found');\r\n        }\r\n\r\n        this.video = null;\r\n        this.controls = null;\r\n\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.container.classList.add('vp-player');\r\n\r\n        // Setup Video Element\r\n        const existingVideo = this.container.querySelector('video');\r\n        if (existingVideo) {\r\n            this.video = existingVideo;\r\n            this.video.classList.add('vp-player__video');\r\n            // Allow config to override/set src if not present\r\n            if (this.config.src) this.video.src = this.config.src;\r\n            if (this.config.autoplay) this.video.autoplay = true;\r\n        } else {\r\n            this.video = document.createElement('video');\r\n            this.video.className = 'vp-player__video';\r\n            if (this.config.src) this.video.src = this.config.src;\r\n            if (this.config.autoplay) this.video.autoplay = true;\r\n            this.container.appendChild(this.video);\r\n        }\r\n\r\n        // Mount Controls\r\n        if (this.config.controls) {\r\n            this.controlsComponent = new Controls(this);\r\n            this.controlsComponent.mount(this.container);\r\n        }\r\n\r\n        // Event Listeners\r\n        this.attachEvents();\r\n\r\n        // Initial state\r\n        this.showControls();\r\n    }\r\n\r\n    attachEvents() {\r\n        // Video Events\r\n        this.video.addEventListener('play', () => {\r\n            this.emit('play');\r\n            this.hideControlsDelayed();\r\n        });\r\n\r\n        this.video.addEventListener('pause', () => {\r\n            this.emit('pause');\r\n            this.showControls();\r\n        });\r\n\r\n        this.video.addEventListener('ended', () => {\r\n            this.emit('ended');\r\n            this.showControls();\r\n        });\r\n\r\n        this.video.addEventListener('timeupdate', () => this.emit('timeupdate'));\r\n        this.video.addEventListener('volumechange', () => this.emit('volumechange'));\r\n        this.video.addEventListener('loadedmetadata', () => this.emit('loadedmetadata'));\r\n\r\n        // Mouse Interaction for Controls\r\n        this.container.addEventListener('mouseenter', () => this.showControls());\r\n        this.container.addEventListener('mouseleave', () => this.hideControlsDelayed());\r\n        this.container.addEventListener('mousemove', () => {\r\n            this.showControls();\r\n            this.hideControlsDelayed();\r\n        });\r\n\r\n        // Click to toggle play\r\n        this.video.addEventListener('click', () => this.togglePlay());\r\n    }\r\n\r\n    showControls() {\r\n        this.container.classList.add('vp-show-controls');\r\n        if (this.controlsTimeout) clearTimeout(this.controlsTimeout);\r\n    }\r\n\r\n    hideControlsDelayed() {\r\n        if (this.video.paused) return; // Keep controls visible if paused\r\n\r\n        if (this.controlsTimeout) clearTimeout(this.controlsTimeout);\r\n        this.controlsTimeout = setTimeout(() => {\r\n            this.container.classList.remove('vp-show-controls');\r\n        }, 3000);\r\n    }\r\n\r\n    play() {\r\n        return this.video.play();\r\n    }\r\n\r\n    pause() {\r\n        this.video.pause();\r\n    }\r\n\r\n    seek(time) {\r\n        this.video.currentTime = time;\r\n    }\r\n\r\n    setVolume(volume) {\r\n        this.video.volume = Math.max(0, Math.min(1, volume));\r\n        this.video.muted = (volume === 0);\r\n    }\r\n\r\n    togglePlay() {\r\n        if (this.video.paused) {\r\n            this.play();\r\n        } else {\r\n            this.pause();\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.video.remove();\r\n        if (this.controls) this.controls.destroy();\r\n        this.container.innerHTML = '';\r\n    }\r\n}\r\n"],"names":["EventEmitter","_classCallCheck","events","_createClass","key","value","on","event","listener","_this","push","off","listenerToRemove","filter","emit","_len","arguments","length","args","Array","_key","forEach","apply","onAny","_this2","Component","player","el","create","Error","mount","container","appendChild","destroy","parentNode","removeChild","createElement","tag","className","document","PlayButton","_Component","_callSuper","onClick","bind","onPlay","onPause","_inherits","btn","innerHTML","getIcon","onclick","togglePlay","classList","add","remove","isPlaying","formatTime","seconds","isNaN","date","Date","hh","getUTCHours","mm","getUTCMinutes","ss","getUTCSeconds","toString","padStart","concat","ProgressBar","isDragging","onTimeUpdate","onMouseDown","onMouseMove","onMouseUp","timeline","progressBar","progressHandle","timePreview","addEventListener","onMouseMovePreview","e","rect","getBoundingClientRect","pos","clientX","left","width","time","video","duration","textContent","previewX","style","transform","percent","currentTime","updateUI","updateFromEvent","removeEventListener","Math","max","min","seek","VolumeControl","onInput","onVolumeChange","slider","type","step","oninput","muted","setVolume","lastVolume","volume","target","isMuted","level","TimeDisplay","currentObj","divider","durationObj","FullscreenButton","fullscreenElement","exitFullscreen","requestFullscreen","SpeedControl","toggleMenu","onSpeedSelect","position","title","menu","speeds","speed","item","dataset","contains","toggle","playbackRate","from","children","child","QualityControl","qualities","label","q","onQualitySelect","quality","element","console","log","Captions","tracks","currentTrack","cues","mockCaptions","en","es","createOverlay","populateMenu","overlay","display","captionText","_this3","offBtn","setTrack","lang","toUpperCase","c","parseVTT","activeCue","find","cue","startTime","endTime","text","vttContent","lines","split","line","trim","currentCue","i","includes","_line$split$map","map","t","_line$split$map2","_slicedToArray","start","end","parseTimeStamp","timeStr","parts","s","parseInt","Controls","controls","timelineContainer","controlsRow","leftControls","playBtn","volumeControl","timeDisplay","centerControls","rightControls","qualityControl","captions","speedControl","fullscreenBtn","VideoPlayer","_EventEmitter","config","_objectSpread","autoplay","theme","querySelector","init","existingVideo","src","controlsComponent","attachEvents","showControls","hideControlsDelayed","controlsTimeout","clearTimeout","paused","setTimeout","play","pause"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAA;EACA;EACA;EAFA,IAGqBA,YAAY,gBAAA,YAAA;EAC7B,EAAA,SAAAA,eAAc;EAAAC,IAAAA,eAAA,OAAAD,YAAA,CAAA;EACV,IAAA,IAAI,CAACE,MAAM,GAAG,EAAE;EACpB,EAAA;IAAC,OAAAC,YAAA,CAAAH,YAAA,EAAA,CAAA;MAAAI,GAAA,EAAA,IAAA;EAAAC,IAAAA,KAAA,EAED,SAAAC,EAAEA,CAACC,KAAK,EAAEC,QAAQ,EAAE;EAAA,MAAA,IAAAC,KAAA,GAAA,IAAA;EAChB,MAAA,IAAI,CAAC,IAAI,CAACP,MAAM,CAACK,KAAK,CAAC,EAAE;EACrB,QAAA,IAAI,CAACL,MAAM,CAACK,KAAK,CAAC,GAAG,EAAE;EAC3B,MAAA;QACA,IAAI,CAACL,MAAM,CAACK,KAAK,CAAC,CAACG,IAAI,CAACF,QAAQ,CAAC;QACjC,OAAO,YAAA;EAAA,QAAA,OAAMC,KAAI,CAACE,GAAG,CAACJ,KAAK,EAAEC,QAAQ,CAAC;EAAA,MAAA,CAAA;EAC1C,IAAA;EAAC,GAAA,EAAA;MAAAJ,GAAA,EAAA,KAAA;EAAAC,IAAAA,KAAA,EAED,SAAAM,GAAGA,CAACJ,KAAK,EAAEK,gBAAgB,EAAE;EACzB,MAAA,IAAI,CAAC,IAAI,CAACV,MAAM,CAACK,KAAK,CAAC,EAAE;EACzB,MAAA,IAAI,CAACL,MAAM,CAACK,KAAK,CAAC,GAAG,IAAI,CAACL,MAAM,CAACK,KAAK,CAAC,CAACM,MAAM,CAAC,UAAAL,QAAQ,EAAA;UAAA,OAAIA,QAAQ,KAAKI,gBAAgB;QAAA,CAAA,CAAC;EAC7F,IAAA;EAAC,GAAA,EAAA;MAAAR,GAAA,EAAA,MAAA;EAAAC,IAAAA,KAAA,EAED,SAAAS,IAAIA,CAACP,KAAK,EAAW;QAAA,KAAA,IAAAQ,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,GAAA,CAAA,GAAAA,IAAA,WAAAK,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA,EAAA,EAAA;EAAJF,QAAAA,IAAI,CAAAE,IAAA,GAAA,CAAA,CAAA,GAAAJ,SAAA,CAAAI,IAAA,CAAA;EAAA,MAAA;EACf,MAAA,IAAI,CAAC,IAAI,CAAClB,MAAM,CAACK,KAAK,CAAC,EAAE;QACzB,IAAI,CAACL,MAAM,CAACK,KAAK,CAAC,CAACc,OAAO,CAAC,UAAAb,QAAQ,EAAA;EAAA,QAAA,OAAIA,QAAQ,CAAAc,KAAA,CAAA,MAAA,EAAIJ,IAAI,CAAC;QAAA,CAAA,CAAC;EAC7D,IAAA;;EAEA;EAAA,GAAA,EAAA;MAAAd,GAAA,EAAA,OAAA;EAAAC,IAAAA,KAAA,EACA,SAAAkB,KAAKA,CAACrB,MAAM,EAAEM,QAAQ,EAAE;EAAA,MAAA,IAAAgB,MAAA,GAAA,IAAA;EACpBtB,MAAAA,MAAM,CAACmB,OAAO,CAAC,UAAAd,KAAK,EAAA;EAAA,QAAA,OAAIiB,MAAI,CAAClB,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;QAAA,CAAA,CAAC;EACrD,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,EAAA;;EC7BL;EACA;EACA;EAFA,IAGqBiB,SAAS,gBAAA,YAAA;IAC1B,SAAAA,SAAAA,CAAYC,MAAM,EAAE;EAAAzB,IAAAA,eAAA,OAAAwB,SAAA,CAAA;MAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACC,EAAE,GAAG,IAAI;EAClB,EAAA;;EAEA;EACJ;EACA;EACA;IAHI,OAAAxB,YAAA,CAAAsB,SAAA,EAAA,CAAA;MAAArB,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAIA,SAAAuB,MAAMA,GAAG;EACL,MAAA,MAAM,IAAIC,KAAK,CAAC,0CAA0C,CAAC;EAC/D,IAAA;;EAEA;EACJ;EACA;EACA;EAHI,GAAA,EAAA;MAAAzB,GAAA,EAAA,OAAA;EAAAC,IAAAA,KAAA,EAIA,SAAAyB,KAAKA,CAACC,SAAS,EAAE;EACb,MAAA,IAAI,CAAC,IAAI,CAACJ,EAAE,EAAE;EACV,QAAA,IAAI,CAACA,EAAE,GAAG,IAAI,CAACC,MAAM,EAAE;EAC3B,MAAA;EACAG,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACL,EAAE,CAAC;EAClC,IAAA;;EAEA;EACJ;EACA;EAFI,GAAA,EAAA;MAAAvB,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAGA,SAAA4B,OAAOA,GAAG;QACN,IAAI,IAAI,CAACN,EAAE,IAAI,IAAI,CAACA,EAAE,CAACO,UAAU,EAAE;UAC/B,IAAI,CAACP,EAAE,CAACO,UAAU,CAACC,WAAW,CAAC,IAAI,CAACR,EAAE,CAAC;EAC3C,MAAA;QACA,IAAI,CAACA,EAAE,GAAG,IAAI;EAClB,IAAA;;EAEA;EACJ;EACA;EACA;EACA;EACA;EALI,GAAA,EAAA;MAAAvB,GAAA,EAAA,eAAA;EAAAC,IAAAA,KAAA,EAMA,SAAA+B,aAAaA,CAACC,GAAG,EAAEC,SAAS,EAAE;EAC1B,MAAA,IAAMX,EAAE,GAAGY,QAAQ,CAACH,aAAa,CAACC,GAAG,CAAC;EACtC,MAAA,IAAIC,SAAS,EAAEX,EAAE,CAACW,SAAS,GAAGA,SAAS;EACvC,MAAA,OAAOX,EAAE;EACb,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,EAAA;;EChD+B,IAEfa,UAAU,0BAAAC,UAAA,EAAA;IAC3B,SAAAD,UAAAA,CAAYd,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAAuC,UAAA,CAAA;EAChB/B,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAAF,UAAA,GAAMd,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKkC,OAAO,GAAGlC,KAAA,CAAKkC,OAAO,CAACC,IAAI,CAAAnC,KAAK,CAAC;MACtCA,KAAA,CAAKoC,MAAM,GAAGpC,KAAA,CAAKoC,MAAM,CAACD,IAAI,CAAAnC,KAAK,CAAC;MACpCA,KAAA,CAAKqC,OAAO,GAAGrC,KAAA,CAAKqC,OAAO,CAACF,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EAC3C,EAAA;IAACsC,SAAA,CAAAP,UAAA,EAAAC,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAqC,UAAA,EAAA,CAAA;MAAApC,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;QACL,IAAMoB,GAAG,GAAG,IAAI,CAACZ,aAAa,CAAC,QAAQ,EAAE,2BAA2B,CAAC;QACrEY,GAAG,CAACC,SAAS,GAAG,IAAI,CAACC,OAAO,CAAC,KAAK,CAAC;EAEnCF,MAAAA,GAAG,CAACG,OAAO,GAAG,IAAI,CAACR,OAAO;;EAE1B;QACA,IAAI,CAACjB,MAAM,CAACpB,EAAE,CAAC,MAAM,EAAE,IAAI,CAACuC,MAAM,CAAC;QACnC,IAAI,CAACnB,MAAM,CAACpB,EAAE,CAAC,OAAO,EAAE,IAAI,CAACwC,OAAO,CAAC;EAErC,MAAA,OAAOE,GAAG;EACd,IAAA;EAAC,GAAA,EAAA;MAAA5C,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsC,OAAOA,GAAG;EACN,MAAA,IAAI,CAACjB,MAAM,CAAC0B,UAAU,EAAE;EAC5B,IAAA;EAAC,GAAA,EAAA;MAAAhD,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAwC,MAAMA,GAAG;QACL,IAAI,CAAClB,EAAE,CAACsB,SAAS,GAAG,IAAI,CAACC,OAAO,CAAC,IAAI,CAAC;QACtC,IAAI,CAACvB,EAAE,CAAC0B,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAC9C,IAAA;EAAC,GAAA,EAAA;MAAAlD,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAAyC,OAAOA,GAAG;QACN,IAAI,CAACnB,EAAE,CAACsB,SAAS,GAAG,IAAI,CAACC,OAAO,CAAC,KAAK,CAAC;QACvC,IAAI,CAACvB,EAAE,CAAC0B,SAAS,CAACE,MAAM,CAAC,mBAAmB,CAAC;EACjD,IAAA;EAAC,GAAA,EAAA;MAAAnD,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAA6C,OAAOA,CAACM,SAAS,EAAE;QACf,OAAOA,SAAS,GACV,uHAAuH;UACvH,qGAAqG,CAAC;EAChH,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CAvCmC/B,SAAS,CAAA;;ECF1C,SAASgC,UAAUA,CAACC,OAAO,EAAE;EAChC,EAAA,IAAIC,KAAK,CAACD,OAAO,CAAC,EAAE,OAAO,OAAO;IAElC,IAAME,IAAI,GAAG,IAAIC,IAAI,CAACH,OAAO,GAAG,IAAI,CAAC;EACrC,EAAA,IAAMI,EAAE,GAAGF,IAAI,CAACG,WAAW,EAAE;EAC7B,EAAA,IAAMC,EAAE,GAAGJ,IAAI,CAACK,aAAa,EAAE;EAC/B,EAAA,IAAMC,EAAE,GAAGN,IAAI,CAACO,aAAa,EAAE,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EAE3D,EAAA,IAAIP,EAAE,EAAE;MACJ,OAAA,EAAA,CAAAQ,MAAA,CAAUR,EAAE,EAAA,GAAA,CAAA,CAAAQ,MAAA,CAAIN,EAAE,CAACI,QAAQ,EAAE,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAA,GAAA,CAAA,CAAAC,MAAA,CAAIJ,EAAE,CAAA;EACxD,EAAA;EACA,EAAA,OAAA,EAAA,CAAAI,MAAA,CAAUN,EAAE,EAAA,GAAA,CAAA,CAAAM,MAAA,CAAIJ,EAAE,CAAA;EACtB;;ECX2C,IAEtBK,WAAW,0BAAA9B,UAAA,EAAA;IAC5B,SAAA8B,WAAAA,CAAY7C,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAAsE,WAAA,CAAA;EAChB9D,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAA6B,WAAA,GAAM7C,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAK+D,UAAU,GAAG,KAAK;;EAEvB;MACA/D,KAAA,CAAKgE,YAAY,GAAGhE,KAAA,CAAKgE,YAAY,CAAC7B,IAAI,CAAAnC,KAAK,CAAC;MAChDA,KAAA,CAAKiE,WAAW,GAAGjE,KAAA,CAAKiE,WAAW,CAAC9B,IAAI,CAAAnC,KAAK,CAAC;MAC9CA,KAAA,CAAKkE,WAAW,GAAGlE,KAAA,CAAKkE,WAAW,CAAC/B,IAAI,CAAAnC,KAAK,CAAC;MAC9CA,KAAA,CAAKmE,SAAS,GAAGnE,KAAA,CAAKmE,SAAS,CAAChC,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EAC/C,EAAA;IAACsC,SAAA,CAAAwB,WAAA,EAAA9B,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAoE,WAAA,EAAA,CAAA;MAAAnE,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;EACL;EACA;QACA,IAAMiD,QAAQ,GAAG,IAAI,CAACzC,aAAa,CAAC,KAAK,EAAE,aAAa,CAAC;QAEzD,IAAI,CAAC0C,WAAW,GAAG,IAAI,CAAC1C,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC;;EAE/D;EACA;EACA;EACA;QACA,IAAI,CAAC2C,cAAc,GAAG,IAAI,CAAC3C,aAAa,CAAC,KAAK,EAAE,oBAAoB,CAAC;QAErE,IAAI,CAAC0C,WAAW,CAAC9C,WAAW,CAAC,IAAI,CAAC+C,cAAc,CAAC;EACjDF,MAAAA,QAAQ,CAAC7C,WAAW,CAAC,IAAI,CAAC8C,WAAW,CAAC;;EAEtC;QACA,IAAI,CAACpD,MAAM,CAACpB,EAAE,CAAC,YAAY,EAAE,IAAI,CAACmE,YAAY,CAAC;;EAE/C;QACA,IAAI,CAACO,WAAW,GAAG,IAAI,CAAC5C,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC;EAC/DyC,MAAAA,QAAQ,CAAC7C,WAAW,CAAC,IAAI,CAACgD,WAAW,CAAC;;EAEtC;EACAH,MAAAA,QAAQ,CAACI,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACC,kBAAkB,CAACtC,IAAI,CAAC,IAAI,CAAC,CAAC;;EAE1E;QACAiC,QAAQ,CAACI,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACP,WAAW,CAAC;;EAExD;QACA,IAAI,CAACG,QAAQ,GAAGA,QAAQ;EAExB,MAAA,OAAOA,QAAQ;EACnB,IAAA;EAAC,GAAA,EAAA;MAAAzE,GAAA,EAAA,oBAAA;EAAAC,IAAAA,KAAA,EAED,SAAA6E,kBAAkBA,CAACC,CAAC,EAAE;QAClB,IAAMC,IAAI,GAAG,IAAI,CAACP,QAAQ,CAACQ,qBAAqB,EAAE;EAClD,MAAA,IAAMC,GAAG,GAAG,CAACH,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI,IAAIJ,IAAI,CAACK,KAAK;QAChD,IAAMC,IAAI,GAAGJ,GAAG,GAAG,IAAI,CAAC5D,MAAM,CAACiE,KAAK,CAACC,QAAQ;QAE7C,IAAI,CAACZ,WAAW,CAACa,WAAW,GAAGpC,UAAU,CAACiC,IAAI,CAAC;EAC/C;QACA,IAAMI,QAAQ,GAAGX,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI;QACtC,IAAI,CAACR,WAAW,CAACe,KAAK,CAACP,IAAI,GAAA,EAAA,CAAAlB,MAAA,CAAMwB,QAAQ,EAAA,IAAA,CAAI;EAC7C,MAAA,IAAI,CAACd,WAAW,CAACe,KAAK,CAACC,SAAS,GAAG,kBAAkB;EACzD,IAAA;EAAC,GAAA,EAAA;MAAA5F,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EAED,SAAAoE,YAAYA,GAAG;QACX,IAAI,IAAI,CAACD,UAAU,EAAE;QACrB,IAAMyB,OAAO,GAAI,IAAI,CAACvE,MAAM,CAACiE,KAAK,CAACO,WAAW,GAAG,IAAI,CAACxE,MAAM,CAACiE,KAAK,CAACC,QAAQ,GAAI,GAAG,IAAI,CAAC;EACvF,MAAA,IAAI,CAACO,QAAQ,CAACF,OAAO,CAAC;EAC1B,IAAA;EAAC,GAAA,EAAA;MAAA7F,GAAA,EAAA,UAAA;EAAAC,IAAAA,KAAA,EAED,SAAA8F,QAAQA,CAACF,OAAO,EAAE;QACd,IAAI,CAACnB,WAAW,CAACiB,KAAK,CAACN,KAAK,GAAA,EAAA,CAAAnB,MAAA,CAAM2B,OAAO,EAAA,GAAA,CAAG;EAC5C;EACA;EACA;EACA;EACJ,IAAA;EAAC,GAAA,EAAA;MAAA7F,GAAA,EAAA,aAAA;EAAAC,IAAAA,KAAA,EAED,SAAAqE,WAAWA,CAACS,CAAC,EAAE;QACX,IAAI,CAACX,UAAU,GAAG,IAAI;EACtB,MAAA,IAAI,CAAC4B,eAAe,CAACjB,CAAC,CAAC;QAEvB5C,QAAQ,CAAC0C,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAACN,WAAW,CAAC;QACxDpC,QAAQ,CAAC0C,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACL,SAAS,CAAC;;EAEpD;EACA;EACA;EACJ,IAAA;EAAC,GAAA,EAAA;MAAAxE,GAAA,EAAA,aAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsE,WAAWA,CAACQ,CAAC,EAAE;EACX,MAAA,IAAI,CAAC,IAAI,CAACX,UAAU,EAAE;EACtB,MAAA,IAAI,CAAC4B,eAAe,CAACjB,CAAC,CAAC;EAC3B,IAAA;EAAC,GAAA,EAAA;MAAA/E,GAAA,EAAA,WAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuE,SAASA,CAACO,CAAC,EAAE;EACT,MAAA,IAAI,CAAC,IAAI,CAACX,UAAU,EAAE;QACtB,IAAI,CAACA,UAAU,GAAG,KAAK;QAEvBjC,QAAQ,CAAC8D,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC1B,WAAW,CAAC;QAC3DpC,QAAQ,CAAC8D,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACzB,SAAS,CAAC;;EAEvD;EACA,MAAA,IAAI,CAACwB,eAAe,CAACjB,CAAC,CAAC;;EAEvB;EACJ,IAAA;EAAC,GAAA,EAAA;MAAA/E,GAAA,EAAA,iBAAA;EAAAC,IAAAA,KAAA,EAED,SAAA+F,eAAeA,CAACjB,CAAC,EAAE;QACf,IAAMC,IAAI,GAAG,IAAI,CAACP,QAAQ,CAACQ,qBAAqB,EAAE;EAClD,MAAA,IAAIC,GAAG,GAAG,CAACH,CAAC,CAACI,OAAO,GAAGH,IAAI,CAACI,IAAI,IAAIJ,IAAI,CAACK,KAAK;EAC9CH,MAAAA,GAAG,GAAGgB,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAElB,GAAG,CAAC,CAAC;EAEnC,MAAA,IAAI,CAACa,QAAQ,CAACb,GAAG,GAAG,GAAG,CAAC;EAExB,MAAA,IAAI,IAAI,CAAC5D,MAAM,CAACiE,KAAK,CAACC,QAAQ,EAAE;EAC5B,QAAA,IAAI,CAAClE,MAAM,CAAC+E,IAAI,CAAC,IAAI,CAAC/E,MAAM,CAACiE,KAAK,CAACC,QAAQ,GAAGN,GAAG,CAAC;EACtD,MAAA;EACJ,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CAjHoC7D,SAAS,CAAA;;ECHd,IAEfiF,aAAa,0BAAAjE,UAAA,EAAA;IAC9B,SAAAiE,aAAAA,CAAYhF,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAAyG,aAAA,CAAA;EAChBjG,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAAgE,aAAA,GAAMhF,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKkC,OAAO,GAAGlC,KAAA,CAAKkC,OAAO,CAACC,IAAI,CAAAnC,KAAK,CAAC;MACtCA,KAAA,CAAKkG,OAAO,GAAGlG,KAAA,CAAKkG,OAAO,CAAC/D,IAAI,CAAAnC,KAAK,CAAC;MACtCA,KAAA,CAAKmG,cAAc,GAAGnG,KAAA,CAAKmG,cAAc,CAAChE,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EACzD,EAAA;IAACsC,SAAA,CAAA2D,aAAA,EAAAjE,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAuG,aAAA,EAAA,CAAA;MAAAtG,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;QACL,IAAMG,SAAS,GAAG,IAAI,CAACK,aAAa,CAAC,KAAK,EAAE,WAAW,CAAC;QAExD,IAAI,CAACY,GAAG,GAAG,IAAI,CAACZ,aAAa,CAAC,QAAQ,EAAE,WAAW,CAAC;QACpD,IAAI,CAACY,GAAG,CAACC,SAAS,GAAG,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC;EACpC,MAAA,IAAI,CAACF,GAAG,CAACG,OAAO,GAAG,IAAI,CAACR,OAAO;QAE/B,IAAI,CAACkE,MAAM,GAAG,IAAI,CAACzE,aAAa,CAAC,OAAO,EAAE,mBAAmB,CAAC;EAC9D,MAAA,IAAI,CAACyE,MAAM,CAACC,IAAI,GAAG,OAAO;EAC1B,MAAA,IAAI,CAACD,MAAM,CAACL,GAAG,GAAG,CAAC;EACnB,MAAA,IAAI,CAACK,MAAM,CAACN,GAAG,GAAG,CAAC;EACnB,MAAA,IAAI,CAACM,MAAM,CAACE,IAAI,GAAG,GAAG;EACtB,MAAA,IAAI,CAACF,MAAM,CAACxG,KAAK,GAAG,CAAC;EACrB,MAAA,IAAI,CAACwG,MAAM,CAACG,OAAO,GAAG,IAAI,CAACL,OAAO;EAElC5E,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACgB,GAAG,CAAC;EAC/BjB,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAAC6E,MAAM,CAAC;QAElC,IAAI,CAACnF,MAAM,CAACpB,EAAE,CAAC,cAAc,EAAE,IAAI,CAACsG,cAAc,CAAC;EAEnD,MAAA,OAAO7E,SAAS;EACpB,IAAA;EAAC,GAAA,EAAA;MAAA3B,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsC,OAAOA,GAAG;EACN,MAAA,IAAI,IAAI,CAACjB,MAAM,CAACiE,KAAK,CAACsB,KAAK,EAAE;EACzB,QAAA,IAAI,CAACvF,MAAM,CAACiE,KAAK,CAACsB,KAAK,GAAG,KAAK;UAC/B,IAAI,CAACvF,MAAM,CAACwF,SAAS,CAAC,IAAI,CAACC,UAAU,IAAI,CAAC,CAAC;EAC/C,MAAA,CAAC,MAAM;UACH,IAAI,CAACA,UAAU,GAAG,IAAI,CAACzF,MAAM,CAACiE,KAAK,CAACyB,MAAM;EAC1C,QAAA,IAAI,CAAC1F,MAAM,CAACiE,KAAK,CAACsB,KAAK,GAAG,IAAI;EAC9B,QAAA,IAAI,CAACvF,MAAM,CAACwF,SAAS,CAAC,CAAC,CAAC;EAC5B,MAAA;EACJ,IAAA;EAAC,GAAA,EAAA;MAAA9G,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsG,OAAOA,CAACxB,CAAC,EAAE;QACP,IAAI,CAACzD,MAAM,CAACwF,SAAS,CAAC/B,CAAC,CAACkC,MAAM,CAAChH,KAAK,CAAC;EACzC,IAAA;EAAC,GAAA,EAAA;MAAAD,GAAA,EAAA,gBAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuG,cAAcA,GAAG;QACb,IAAMQ,MAAM,GAAG,IAAI,CAAC1F,MAAM,CAACiE,KAAK,CAACyB,MAAM;EACvC,MAAA,IAAME,OAAO,GAAG,IAAI,CAAC5F,MAAM,CAACiE,KAAK,CAACsB,KAAK,IAAIG,MAAM,KAAK,CAAC;QAEvD,IAAI,CAACP,MAAM,CAACxG,KAAK,GAAGiH,OAAO,GAAG,CAAC,GAAGF,MAAM;EACxC,MAAA,IAAI,CAACpE,GAAG,CAACC,SAAS,GAAG,IAAI,CAACC,OAAO,CAACoE,OAAO,GAAG,CAAC,GAAGF,MAAM,CAAC;EAC3D,IAAA;EAAC,GAAA,EAAA;MAAAhH,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAA6C,OAAOA,CAACqE,KAAK,EAAE;QACX,IAAIA,KAAK,KAAK,CAAC,EAAE;EACb,QAAA,OAAO,kbAAkb;EAC7b,MAAA,CAAC,MAAM,IAAIA,KAAK,GAAG,GAAG,EAAE;EACpB,QAAA,OAAO,gLAAgL;EAC3L,MAAA,CAAC,MAAM;EACH,QAAA,OAAO,mRAAmR;EAC9R,MAAA;EACJ,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CA9DsC9F,SAAS,CAAA;;ECDT,IAEtB+F,WAAW,0BAAA/E,UAAA,EAAA;IAC5B,SAAA+E,WAAAA,CAAY9F,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAAuH,WAAA,CAAA;EAChB/G,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAA8E,WAAA,GAAM9F,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKgE,YAAY,GAAGhE,KAAA,CAAKgE,YAAY,CAAC7B,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EACrD,EAAA;IAACsC,SAAA,CAAAyE,WAAA,EAAA/E,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAqH,WAAA,EAAA,CAAA;MAAApH,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;QACL,IAAMG,SAAS,GAAG,IAAI,CAACK,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC;QAE9D,IAAI,CAACqF,UAAU,GAAG,IAAI,CAACrF,aAAa,CAAC,MAAM,CAAC;EAC5C,MAAA,IAAI,CAACqF,UAAU,CAAC5B,WAAW,GAAG,OAAO;EAErC,MAAA,IAAM6B,OAAO,GAAGnF,QAAQ,CAACH,aAAa,CAAC,MAAM,CAAC;QAC9CsF,OAAO,CAAC7B,WAAW,GAAG,KAAK;QAE3B,IAAI,CAAC8B,WAAW,GAAG,IAAI,CAACvF,aAAa,CAAC,MAAM,CAAC;EAC7C,MAAA,IAAI,CAACuF,WAAW,CAAC9B,WAAW,GAAG,OAAO;EAEtC9D,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACyF,UAAU,CAAC;EACtC1F,MAAAA,SAAS,CAACC,WAAW,CAAC0F,OAAO,CAAC;EAC9B3F,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAAC2F,WAAW,CAAC;QAEvC,IAAI,CAACjG,MAAM,CAACpB,EAAE,CAAC,YAAY,EAAE,IAAI,CAACmE,YAAY,CAAC;QAC/C,IAAI,CAAC/C,MAAM,CAACpB,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAACmE,YAAY,CAAC;EAEnD,MAAA,OAAO1C,SAAS;EACpB,IAAA;EAAC,GAAA,EAAA;MAAA3B,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EAED,SAAAoE,YAAYA,GAAG;EACX,MAAA,IAAI,CAACgD,UAAU,CAAC5B,WAAW,GAAGpC,UAAU,CAAC,IAAI,CAAC/B,MAAM,CAACiE,KAAK,CAACO,WAAW,CAAC;EACvE,MAAA,IAAI,CAACyB,WAAW,CAAC9B,WAAW,GAAGpC,UAAU,CAAC,IAAI,CAAC/B,MAAM,CAACiE,KAAK,CAACC,QAAQ,CAAC;EACzE,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CA/BoCnE,SAAS,CAAA;;ECHd,IAEfmG,gBAAgB,0BAAAnF,UAAA,EAAA;IACjC,SAAAmF,gBAAAA,CAAYlG,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAA2H,gBAAA,CAAA;EAChBnH,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAAkF,gBAAA,GAAMlG,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKkC,OAAO,GAAGlC,KAAA,CAAKkC,OAAO,CAACC,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EAC3C,EAAA;IAACsC,SAAA,CAAA6E,gBAAA,EAAAnF,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAyH,gBAAA,EAAA,CAAA;MAAAxH,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;QACL,IAAMoB,GAAG,GAAG,IAAI,CAACZ,aAAa,CAAC,QAAQ,EAAE,iCAAiC,CAAC;QAC3EY,GAAG,CAACC,SAAS,GAAG,sKAAsK;EACtLD,MAAAA,GAAG,CAACG,OAAO,GAAG,IAAI,CAACR,OAAO;EAC1B,MAAA,OAAOK,GAAG;EACd,IAAA;EAAC,GAAA,EAAA;MAAA5C,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsC,OAAOA,GAAG;QACN,IAAIJ,QAAQ,CAACsF,iBAAiB,EAAE;UAC5BtF,QAAQ,CAACuF,cAAc,EAAE;EAC7B,MAAA,CAAC,MAAM;EACH,QAAA,IAAI,CAACpG,MAAM,CAACK,SAAS,CAACgG,iBAAiB,EAAE;EAC7C,MAAA;EACJ,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CAnByCtG,SAAS,CAAA;;ECFnB,IAEfuG,YAAY,0BAAAvF,UAAA,EAAA;IAC7B,SAAAuF,YAAAA,CAAYtG,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAA+H,YAAA,CAAA;EAChBvH,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAAsF,YAAA,GAAMtG,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKwH,UAAU,GAAGxH,KAAA,CAAKwH,UAAU,CAACrF,IAAI,CAAAnC,KAAK,CAAC;MAC5CA,KAAA,CAAKyH,aAAa,GAAGzH,KAAA,CAAKyH,aAAa,CAACtF,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EACvD,EAAA;IAACsC,SAAA,CAAAiF,YAAA,EAAAvF,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAA6H,YAAA,EAAA,CAAA;MAAA5H,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;EAAA,MAAA,IAAAJ,MAAA,GAAA,IAAA;QACL,IAAMO,SAAS,GAAG,IAAI,CAACK,aAAa,CAAC,KAAK,EAAE,kBAAkB,CAAC;EAC/DL,MAAAA,SAAS,CAACgE,KAAK,CAACoC,QAAQ,GAAG,UAAU;QAErC,IAAI,CAACnF,GAAG,GAAG,IAAI,CAACZ,aAAa,CAAC,QAAQ,EAAE,WAAW,CAAC;EACpD,MAAA,IAAI,CAACY,GAAG,CAACC,SAAS,GAAG,0TAA0T;EAC/U,MAAA,IAAI,CAACD,GAAG,CAACoF,KAAK,GAAG,gBAAgB;EACjC,MAAA,IAAI,CAACpF,GAAG,CAACG,OAAO,GAAG,IAAI,CAAC8E,UAAU;QAElC,IAAI,CAACI,IAAI,GAAG,IAAI,CAACjG,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC;EAEhD,MAAA,IAAMkG,MAAM,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;EAC3CA,MAAAA,MAAM,CAACjH,OAAO,CAAC,UAAAkH,KAAK,EAAI;UACpB,IAAMC,IAAI,GAAGhH,MAAI,CAACY,aAAa,CAAC,QAAQ,EAAE,aAAa,CAAC;EACxDoG,QAAAA,IAAI,CAAC3C,WAAW,GAAG0C,KAAK,GAAG,GAAG;EAC9BC,QAAAA,IAAI,CAACC,OAAO,CAACF,KAAK,GAAGA,KAAK;UAC1B,IAAIA,KAAK,KAAK,CAAC,EAAEC,IAAI,CAACnF,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;EAClDkF,QAAAA,IAAI,CAACrF,OAAO,GAAG,UAACgC,CAAC,EAAA;EAAA,UAAA,OAAK3D,MAAI,CAAC0G,aAAa,CAACK,KAAK,EAAEpD,CAAC,CAAC;EAAA,QAAA,CAAA;EAClD3D,QAAAA,MAAI,CAAC6G,IAAI,CAACrG,WAAW,CAACwG,IAAI,CAAC;EAC/B,MAAA,CAAC,CAAC;EAEFzG,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACgB,GAAG,CAAC;EAC/BjB,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACqG,IAAI,CAAC;;EAEhC;EACA9F,MAAAA,QAAQ,CAAC0C,gBAAgB,CAAC,OAAO,EAAE,UAACE,CAAC,EAAK;UACtC,IAAI,CAACpD,SAAS,CAAC2G,QAAQ,CAACvD,CAAC,CAACkC,MAAM,CAAC,EAAE;YAC/B7F,MAAI,CAAC6G,IAAI,CAAChF,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;EAC3C,QAAA;EACJ,MAAA,CAAC,CAAC;EAEF,MAAA,OAAOxB,SAAS;EACpB,IAAA;EAAC,GAAA,EAAA;MAAA3B,GAAA,EAAA,YAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4H,UAAUA,GAAG;QACT,IAAI,CAACI,IAAI,CAAChF,SAAS,CAACsF,MAAM,CAAC,WAAW,CAAC;EAC3C,IAAA;EAAC,GAAA,EAAA;MAAAvI,GAAA,EAAA,eAAA;EAAAC,IAAAA,KAAA,EAED,SAAA6H,aAAaA,CAACK,KAAK,EAAEpD,CAAC,EAAE;EACpB,MAAA,IAAI,CAACzD,MAAM,CAACiE,KAAK,CAACiD,YAAY,GAAGL,KAAK;;EAEtC;EACApH,MAAAA,KAAK,CAAC0H,IAAI,CAAC,IAAI,CAACR,IAAI,CAACS,QAAQ,CAAC,CAACzH,OAAO,CAAC,UAAA0H,KAAK,EAAA;EAAA,QAAA,OAAIA,KAAK,CAAC1F,SAAS,CAACE,MAAM,CAAC,aAAa,CAAC;QAAA,CAAA,CAAC;QACtF4B,CAAC,CAACkC,MAAM,CAAChE,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;QAErC,IAAI,CAAC+E,IAAI,CAAChF,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;EAC3C,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CArDqC9B,SAAS,CAAA;;ECFf,IAEfuH,cAAc,0BAAAvG,UAAA,EAAA;IAC/B,SAAAuG,cAAAA,CAAYtH,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAA+I,cAAA,CAAA;EAChBvI,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAAsG,cAAA,GAAMtH,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKwH,UAAU,GAAGxH,KAAA,CAAKwH,UAAU,CAACrF,IAAI,CAAAnC,KAAK,CAAC;EAAC,IAAA,OAAAA,KAAA;EACjD,EAAA;IAACsC,SAAA,CAAAiG,cAAA,EAAAvG,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAA6I,cAAA,EAAA,CAAA;MAAA5I,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;EAAA,MAAA,IAAAJ,MAAA,GAAA,IAAA;QACL,IAAMO,SAAS,GAAG,IAAI,CAACK,aAAa,CAAC,KAAK,EAAE,oBAAoB,CAAC;EACjEL,MAAAA,SAAS,CAACgE,KAAK,CAACoC,QAAQ,GAAG,UAAU;QAErC,IAAI,CAACnF,GAAG,GAAG,IAAI,CAACZ,aAAa,CAAC,QAAQ,EAAE,WAAW,CAAC;EACpD,MAAA,IAAI,CAACY,GAAG,CAACC,SAAS,GAAG,wUAAwU;EAC7V,MAAA,IAAI,CAACD,GAAG,CAACoF,KAAK,GAAG,SAAS;EAC1B,MAAA,IAAI,CAACpF,GAAG,CAACG,OAAO,GAAG,IAAI,CAAC8E,UAAU;QAElC,IAAI,CAACI,IAAI,GAAG,IAAI,CAACjG,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC;;EAEhD;QACA,IAAM6G,SAAS,GAAG,CACd;EAAEC,QAAAA,KAAK,EAAE,MAAM;EAAE7I,QAAAA,KAAK,EAAE;EAAO,OAAC,EAChC;EAAE6I,QAAAA,KAAK,EAAE,OAAO;EAAE7I,QAAAA,KAAK,EAAE;EAAQ,OAAC,EAClC;EAAE6I,QAAAA,KAAK,EAAE,MAAM;EAAE7I,QAAAA,KAAK,EAAE;EAAO,OAAC,EAChC;EAAE6I,QAAAA,KAAK,EAAE,MAAM;EAAE7I,QAAAA,KAAK,EAAE;EAAO,OAAC,CACnC;EAED4I,MAAAA,SAAS,CAAC5H,OAAO,CAAC,UAAA8H,CAAC,EAAI;UACnB,IAAMX,IAAI,GAAGhH,MAAI,CAACY,aAAa,CAAC,QAAQ,EAAE,aAAa,CAAC;UACxDoG,IAAI,CAACvF,SAAS,GAAA,QAAA,CAAAqB,MAAA,CAAY6E,CAAC,CAACD,KAAK,EAAA,SAAA,CAAA,CAAA5E,MAAA,CAAU6E,CAAC,CAAC9I,KAAK,KAAK,MAAM,GAAG,2HAA2H,GAAG,EAAE,CAAE;EAClM,QAAA,IAAI8I,CAAC,CAAC9I,KAAK,KAAK,MAAM,EAAEmI,IAAI,CAACnF,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;UACzDkF,IAAI,CAACrF,OAAO,GAAG,YAAA;YAAA,OAAM3B,MAAI,CAAC4H,eAAe,CAACD,CAAC,CAAC9I,KAAK,EAAEmI,IAAI,CAAC;EAAA,QAAA,CAAA;EACxDhH,QAAAA,MAAI,CAAC6G,IAAI,CAACrG,WAAW,CAACwG,IAAI,CAAC;EAC/B,MAAA,CAAC,CAAC;EAEFzG,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACgB,GAAG,CAAC;EAC/BjB,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACqG,IAAI,CAAC;EAEhC9F,MAAAA,QAAQ,CAAC0C,gBAAgB,CAAC,OAAO,EAAE,UAACE,CAAC,EAAK;UACtC,IAAI,CAACpD,SAAS,CAAC2G,QAAQ,CAACvD,CAAC,CAACkC,MAAM,CAAC,EAAE;YAC/B7F,MAAI,CAAC6G,IAAI,CAAChF,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;EAC3C,QAAA;EACJ,MAAA,CAAC,CAAC;EAEF,MAAA,OAAOxB,SAAS;EACpB,IAAA;EAAC,GAAA,EAAA;MAAA3B,GAAA,EAAA,YAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4H,UAAUA,GAAG;QACT,IAAI,CAACI,IAAI,CAAChF,SAAS,CAACsF,MAAM,CAAC,WAAW,CAAC;EAC3C,IAAA;EAAC,GAAA,EAAA;MAAAvI,GAAA,EAAA,iBAAA;EAAAC,IAAAA,KAAA,EAED,SAAA+I,eAAeA,CAACC,OAAO,EAAEC,OAAO,EAAE;EAC9BC,MAAAA,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEH,OAAO,CAAC;EAC7C;EACA;EACAlI,MAAAA,KAAK,CAAC0H,IAAI,CAAC,IAAI,CAACR,IAAI,CAACS,QAAQ,CAAC,CAACzH,OAAO,CAAC,UAAA0H,KAAK,EAAA;EAAA,QAAA,OAAIA,KAAK,CAAC1F,SAAS,CAACE,MAAM,CAAC,aAAa,CAAC;QAAA,CAAA,CAAC;EACtF+F,MAAAA,OAAO,CAACjG,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;QAEpC,IAAI,CAAC+E,IAAI,CAAChF,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;EAC3C,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CAzDuC9B,SAAS,CAAA;;ECDV,IAEtBgI,QAAQ,0BAAAhH,UAAA,EAAA;IACzB,SAAAgH,QAAAA,CAAY/H,MAAM,EAAE;EAAA,IAAA,IAAAjB,KAAA;EAAAR,IAAAA,eAAA,OAAAwJ,QAAA,CAAA;EAChBhJ,IAAAA,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAA+G,QAAA,GAAM/H,MAAM,CAAA,CAAA;MACZjB,KAAA,CAAKwH,UAAU,GAAGxH,KAAA,CAAKwH,UAAU,CAACrF,IAAI,CAAAnC,KAAK,CAAC;MAC5CA,KAAA,CAAKgE,YAAY,GAAGhE,KAAA,CAAKgE,YAAY,CAAC7B,IAAI,CAAAnC,KAAK,CAAC;EAEhDA,IAAAA,KAAA,CAAKiJ,MAAM,GAAG,EAAE;MAChBjJ,KAAA,CAAKkJ,YAAY,GAAG,IAAI;MACxBlJ,KAAA,CAAKmJ,IAAI,GAAG,EAAE;;EAEd;EACA;MACAnJ,KAAA,CAAKoJ,YAAY,GAAG;EAChBC,MAAAA,EAAE,EAAA,gTAS8C;QAChDC,EAAE,EAAA;OAOL;EAAC,IAAA,OAAAtJ,KAAA;EACN,EAAA;IAACsC,SAAA,CAAA0G,QAAA,EAAAhH,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAsJ,QAAA,EAAA,CAAA;MAAArJ,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;EAAA,MAAA,IAAAJ,MAAA,GAAA,IAAA;QACL,IAAMO,SAAS,GAAG,IAAI,CAACK,aAAa,CAAC,KAAK,EAAE,qBAAqB,CAAC;EAClEL,MAAAA,SAAS,CAACgE,KAAK,CAACoC,QAAQ,GAAG,UAAU;QAErC,IAAI,CAACnF,GAAG,GAAG,IAAI,CAACZ,aAAa,CAAC,QAAQ,EAAE,WAAW,CAAC;EACpD,MAAA,IAAI,CAACY,GAAG,CAACC,SAAS,GAAG,4UAA4U;EACjW,MAAA,IAAI,CAACD,GAAG,CAACoF,KAAK,GAAG,UAAU;EAC3B,MAAA,IAAI,CAACpF,GAAG,CAACG,OAAO,GAAG,IAAI,CAAC8E,UAAU;QAElC,IAAI,CAACI,IAAI,GAAG,IAAI,CAACjG,aAAa,CAAC,KAAK,EAAE,SAAS,CAAC;;EAEhD;QACA,IAAI,CAAC4H,aAAa,EAAE;;EAEpB;QACA,IAAI,CAACC,YAAY,EAAE;EAEnBlI,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACgB,GAAG,CAAC;EAC/BjB,MAAAA,SAAS,CAACC,WAAW,CAAC,IAAI,CAACqG,IAAI,CAAC;;EAEhC;QACA,IAAI,CAAC3G,MAAM,CAACpB,EAAE,CAAC,YAAY,EAAE,IAAI,CAACmE,YAAY,CAAC;EAE/ClC,MAAAA,QAAQ,CAAC0C,gBAAgB,CAAC,OAAO,EAAE,UAACE,CAAC,EAAK;UACtC,IAAI,CAACpD,SAAS,CAAC2G,QAAQ,CAACvD,CAAC,CAACkC,MAAM,CAAC,EAAE;YAC/B7F,MAAI,CAAC6G,IAAI,CAAChF,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;EAC3C,QAAA;EACJ,MAAA,CAAC,CAAC;EAEF,MAAA,OAAOxB,SAAS;EACpB,IAAA;EAAC,GAAA,EAAA;MAAA3B,GAAA,EAAA,eAAA;EAAAC,IAAAA,KAAA,EAED,SAAA2J,aAAaA,GAAG;QACZ,IAAI,CAACE,OAAO,GAAG3H,QAAQ,CAACH,aAAa,CAAC,KAAK,CAAC;EAC5C,MAAA,IAAI,CAAC8H,OAAO,CAAC5H,SAAS,GAAG,qBAAqB;EAC9C,MAAA,IAAI,CAAC4H,OAAO,CAACnE,KAAK,CAACoE,OAAO,GAAG,MAAM;QAEnC,IAAI,CAACC,WAAW,GAAG7H,QAAQ,CAACH,aAAa,CAAC,MAAM,CAAC;EACjD,MAAA,IAAI,CAACgI,WAAW,CAAC9H,SAAS,GAAG,iBAAiB;QAE9C,IAAI,CAAC4H,OAAO,CAAClI,WAAW,CAAC,IAAI,CAACoI,WAAW,CAAC;;EAE1C;EACA;EACA;QACA,IAAI,CAAC1I,MAAM,CAACK,SAAS,CAACC,WAAW,CAAC,IAAI,CAACkI,OAAO,CAAC;EACnD,IAAA;EAAC,GAAA,EAAA;MAAA9J,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4J,YAAYA,GAAG;EAAA,MAAA,IAAAI,MAAA,GAAA,IAAA;EACX;QACA,IAAMC,MAAM,GAAG,IAAI,CAAClI,aAAa,CAAC,QAAQ,EAAE,aAAa,CAAC;QAC1DkI,MAAM,CAACzE,WAAW,GAAG,KAAK;QAC1ByE,MAAM,CAACnH,OAAO,GAAG,YAAA;EAAA,QAAA,OAAMkH,MAAI,CAACE,QAAQ,CAAC,IAAI,CAAC;EAAA,MAAA,CAAA;EAC1C,MAAA,IAAI,CAAC,IAAI,CAACZ,YAAY,EAAEW,MAAM,CAACjH,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;EAC3D,MAAA,IAAI,CAAC+E,IAAI,CAACrG,WAAW,CAACsI,MAAM,CAAC;;EAE7B;QACA,CAAC,IAAI,EAAE,IAAI,CAAC,CAACjJ,OAAO,CAAC,UAAAmJ,IAAI,EAAI;UACzB,IAAMxH,GAAG,GAAGqH,MAAI,CAACjI,aAAa,CAAC,QAAQ,EAAE,aAAa,CAAC;EACvDY,QAAAA,GAAG,CAAC6C,WAAW,GAAG2E,IAAI,CAACC,WAAW,EAAE;EACpCzH,QAAAA,GAAG,CAACyF,OAAO,CAAC+B,IAAI,GAAGA,IAAI;EACvBxH,QAAAA,GAAG,CAACG,OAAO,GAAG,UAACgC,CAAC,EAAK;EACjBkF,UAAAA,MAAI,CAACE,QAAQ,CAACC,IAAI,CAAC;EACnBrJ,UAAAA,KAAK,CAAC0H,IAAI,CAACwB,MAAI,CAAChC,IAAI,CAACS,QAAQ,CAAC,CAACzH,OAAO,CAAC,UAAAqJ,CAAC,EAAA;EAAA,YAAA,OAAIA,CAAC,CAACrH,SAAS,CAACE,MAAM,CAAC,aAAa,CAAC;YAAA,CAAA,CAAC;YAC9E4B,CAAC,CAACkC,MAAM,CAAChE,SAAS,CAACC,GAAG,CAAC,aAAa,CAAC;EACrC;EACAgH,UAAAA,MAAM,CAACjH,SAAS,CAACE,MAAM,CAAC,aAAa,CAAC;UAC1C,CAAC;EACD8G,QAAAA,MAAI,CAAChC,IAAI,CAACrG,WAAW,CAACgB,GAAG,CAAC;;EAE1B;EACAqH,QAAAA,MAAI,CAACX,MAAM,CAACc,IAAI,CAAC,GAAGH,MAAI,CAACM,QAAQ,CAACN,MAAI,CAACR,YAAY,CAACW,IAAI,CAAC,CAAC;EAC9D,MAAA,CAAC,CAAC;EACN,IAAA;EAAC,GAAA,EAAA;MAAApK,GAAA,EAAA,YAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4H,UAAUA,GAAG;QACT,IAAI,CAACI,IAAI,CAAChF,SAAS,CAACsF,MAAM,CAAC,WAAW,CAAC;EAC3C,IAAA;EAAC,GAAA,EAAA;MAAAvI,GAAA,EAAA,UAAA;EAAAC,IAAAA,KAAA,EAED,SAAAkK,QAAQA,CAACC,IAAI,EAAE;QACX,IAAI,CAACb,YAAY,GAAGa,IAAI;EACxB,MAAA,IAAIA,IAAI,EAAE;UACN,IAAI,CAACZ,IAAI,GAAG,IAAI,CAACF,MAAM,CAACc,IAAI,CAAC;EAC7B,QAAA,IAAI,CAACN,OAAO,CAACnE,KAAK,CAACoE,OAAO,GAAG,OAAO;UACpC,IAAI,CAACnH,GAAG,CAACK,SAAS,CAACC,GAAG,CAAC,mBAAmB,CAAC;EAC/C,MAAA,CAAC,MAAM;UACH,IAAI,CAACsG,IAAI,GAAG,EAAE;EACd,QAAA,IAAI,CAACM,OAAO,CAACnE,KAAK,CAACoE,OAAO,GAAG,MAAM;UACnC,IAAI,CAACnH,GAAG,CAACK,SAAS,CAACE,MAAM,CAAC,mBAAmB,CAAC;EAClD,MAAA;QACA,IAAI,CAAC8E,IAAI,CAAChF,SAAS,CAACE,MAAM,CAAC,WAAW,CAAC;EAC3C,IAAA;EAAC,GAAA,EAAA;MAAAnD,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EAED,SAAAoE,YAAYA,GAAG;QACX,IAAI,CAAC,IAAI,CAACkF,YAAY,IAAI,CAAC,IAAI,CAACC,IAAI,CAAC3I,MAAM,EAAE;QAE7C,IAAMyE,IAAI,GAAG,IAAI,CAAChE,MAAM,CAACiE,KAAK,CAACO,WAAW;QAC1C,IAAM0E,SAAS,GAAG,IAAI,CAAChB,IAAI,CAACiB,IAAI,CAAC,UAAAC,GAAG,EAAA;UAAA,OAAIpF,IAAI,IAAIoF,GAAG,CAACC,SAAS,IAAIrF,IAAI,IAAIoF,GAAG,CAACE,OAAO;QAAA,CAAA,CAAC;EAErF,MAAA,IAAIJ,SAAS,EAAE;EACX,QAAA,IAAI,CAACR,WAAW,CAACvE,WAAW,GAAG+E,SAAS,CAACK,IAAI;EAC7C,QAAA,IAAI,CAACb,WAAW,CAACrE,KAAK,CAACoE,OAAO,GAAG,cAAc;EACnD,MAAA,CAAC,MAAM;EACH,QAAA,IAAI,CAACC,WAAW,CAACrE,KAAK,CAACoE,OAAO,GAAG,MAAM;EAC3C,MAAA;EACJ,IAAA;EAAC,GAAA,EAAA;MAAA/J,GAAA,EAAA,UAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsK,QAAQA,CAACO,UAAU,EAAE;EACjB,MAAA,IAAMC,KAAK,GAAGD,UAAU,CAACE,KAAK,CAAC,IAAI,CAAC,CAACvK,MAAM,CAAC,UAAAwK,IAAI,EAAA;EAAA,QAAA,OAAIA,IAAI,CAACC,IAAI,EAAE;QAAA,CAAA,CAAC;QAChE,IAAM1B,IAAI,GAAG,EAAE;QACf,IAAI2B,UAAU,GAAG,IAAI;EAErB,MAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,KAAK,CAAClK,MAAM,EAAEuK,CAAC,EAAE,EAAE;UACnC,IAAMH,IAAI,GAAGF,KAAK,CAACK,CAAC,CAAC,CAACF,IAAI,EAAE;UAC5B,IAAID,IAAI,KAAK,QAAQ,EAAE;EAEvB,QAAA,IAAIA,IAAI,CAACI,QAAQ,CAAC,KAAK,CAAC,EAAE;EACtB,UAAA,IAAAC,eAAA,GAAqBL,IAAI,CAACD,KAAK,CAAC,KAAK,CAAC,CAACO,GAAG,CAAC,UAAAC,CAAC,EAAA;EAAA,cAAA,OAAIA,CAAC,CAACN,IAAI,EAAE;cAAA,CAAA,CAAC;cAAAO,gBAAA,GAAAC,cAAA,CAAAJ,eAAA,EAAA,CAAA,CAAA;EAAlDK,YAAAA,KAAK,GAAAF,gBAAA,CAAA,CAAA,CAAA;EAAEG,YAAAA,GAAG,GAAAH,gBAAA,CAAA,CAAA,CAAA;EACjBN,UAAAA,UAAU,GAAG;EACTR,YAAAA,SAAS,EAAE,IAAI,CAACkB,cAAc,CAACF,KAAK,CAAC;EACrCf,YAAAA,OAAO,EAAE,IAAI,CAACiB,cAAc,CAACD,GAAG,CAAC;EACjCf,YAAAA,IAAI,EAAE;aACT;EACL,QAAA,CAAC,MAAM,IAAIM,UAAU,IAAIF,IAAI,EAAE;EAC3BE,UAAAA,UAAU,CAACN,IAAI,IAAI,CAACM,UAAU,CAACN,IAAI,GAAG,GAAG,GAAG,EAAE,IAAII,IAAI;EACtD,UAAA,IAAIG,CAAC,KAAKL,KAAK,CAAClK,MAAM,GAAG,CAAC,IAAIkK,KAAK,CAACK,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAACN,KAAK,CAACK,CAAC,GAAG,CAAC,CAAC,CAACF,IAAI,EAAE,EAAE;EAChF1B,YAAAA,IAAI,CAAClJ,IAAI,CAAC6K,UAAU,CAAC;EACrBA,YAAAA,UAAU,GAAG,IAAI;EACrB,UAAA;EACJ,QAAA;EACJ,MAAA;EACA,MAAA,OAAO3B,IAAI;EACf,IAAA;EAAC,GAAA,EAAA;MAAAxJ,GAAA,EAAA,gBAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4L,cAAcA,CAACC,OAAO,EAAE;EACpB,MAAA,IAAMC,KAAK,GAAGD,OAAO,CAACd,KAAK,CAAC,GAAG,CAAC;EAChC,MAAA,IAAM1H,OAAO,GAAGyI,KAAK,CAACA,KAAK,CAAClL,MAAM,GAAG,CAAC,CAAC,CAACmK,KAAK,CAAC,GAAG,CAAC;QAClD,IAAMgB,CAAC,GAAGC,QAAQ,CAAC3I,OAAO,CAAC,CAAC,CAAC,CAAC,GAAI2I,QAAQ,CAAC3I,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAK;EAEnE,MAAA,IAAIyI,KAAK,CAAClL,MAAM,KAAK,CAAC,EAAE;UACpB,OAAOoL,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,GAAGE,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAGC,CAAC;EAClE,MAAA,CAAC,MAAM;UACH,OAAOC,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAGC,CAAC;EACtC,MAAA;EACJ,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CAjLiC3K,SAAS,CAAA;;ECMb,IAEb6K,QAAQ,0BAAA7J,UAAA,EAAA;IACzB,SAAA6J,QAAAA,CAAY5K,MAAM,EAAE;EAAAzB,IAAAA,eAAA,OAAAqM,QAAA,CAAA;EAAA,IAAA,OAAA5J,UAAA,CAAA,IAAA,EAAA4J,QAAA,EAAA,CACV5K,MAAM,CAAA,CAAA;EAChB,EAAA;IAACqB,SAAA,CAAAuJ,QAAA,EAAA7J,UAAA,CAAA;IAAA,OAAAtC,YAAA,CAAAmM,QAAA,EAAA,CAAA;MAAAlM,GAAA,EAAA,QAAA;EAAAC,IAAAA,KAAA,EAED,SAAAuB,MAAMA,GAAG;QACL,IAAM2K,QAAQ,GAAG,IAAI,CAACnK,aAAa,CAAC,KAAK,EAAE,qBAAqB,CAAC;;EAEjE;QACA,IAAMoK,iBAAiB,GAAG,IAAI,CAACpK,aAAa,CAAC,KAAK,EAAE,uBAAuB,CAAC;QAE5E,IAAM0C,WAAW,GAAG,IAAIP,WAAW,CAAC,IAAI,CAAC7C,MAAM,CAAC;EAChDoD,MAAAA,WAAW,CAAChD,KAAK,CAAC0K,iBAAiB,CAAC;EAEpCD,MAAAA,QAAQ,CAACvK,WAAW,CAACwK,iBAAiB,CAAC;;EAEvC;QACA,IAAMC,WAAW,GAAG,IAAI,CAACrK,aAAa,CAAC,KAAK,EAAE,iBAAiB,CAAC;EAChEmK,MAAAA,QAAQ,CAACvK,WAAW,CAACyK,WAAW,CAAC;;EAEjC;QACA,IAAMC,YAAY,GAAG,IAAI,CAACtK,aAAa,CAAC,KAAK,EAAE,kBAAkB,CAAC;EAClEqK,MAAAA,WAAW,CAACzK,WAAW,CAAC0K,YAAY,CAAC;QAErC,IAAMC,OAAO,GAAG,IAAInK,UAAU,CAAC,IAAI,CAACd,MAAM,CAAC,CAAC;EAC5C;EACA;EACA;EACA;EACA;;EAEA;;EAEA;QACA,IAAMkL,aAAa,GAAG,IAAIlG,aAAa,CAAC,IAAI,CAAChF,MAAM,CAAC;EACpDkL,MAAAA,aAAa,CAAC9K,KAAK,CAAC4K,YAAY,CAAC;;EAEjC;QACA,IAAMG,WAAW,GAAG,IAAIrF,WAAW,CAAC,IAAI,CAAC9F,MAAM,CAAC;EAChDmL,MAAAA,WAAW,CAAC/K,KAAK,CAAC4K,YAAY,CAAC;;EAE/B;QACA,IAAMI,cAAc,GAAG,IAAI,CAAC1K,aAAa,CAAC,KAAK,EAAE,oBAAoB,CAAC;EACtEqK,MAAAA,WAAW,CAACzK,WAAW,CAAC8K,cAAc,CAAC;;EAEvC;EACAH,MAAAA,OAAO,CAAC7K,KAAK,CAACgL,cAAc,CAAC;;EAE7B;QACA,IAAMC,aAAa,GAAG,IAAI,CAAC3K,aAAa,CAAC,KAAK,EAAE,mBAAmB,CAAC;EACpEqK,MAAAA,WAAW,CAACzK,WAAW,CAAC+K,aAAa,CAAC;QAEtC,IAAMC,cAAc,GAAG,IAAIhE,cAAc,CAAC,IAAI,CAACtH,MAAM,CAAC;EACtDsL,MAAAA,cAAc,CAAClL,KAAK,CAACiL,aAAa,CAAC;QAEnC,IAAME,QAAQ,GAAG,IAAIxD,QAAQ,CAAC,IAAI,CAAC/H,MAAM,CAAC;EAC1CuL,MAAAA,QAAQ,CAACnL,KAAK,CAACiL,aAAa,CAAC;QAE7B,IAAMG,YAAY,GAAG,IAAIlF,YAAY,CAAC,IAAI,CAACtG,MAAM,CAAC;EAClDwL,MAAAA,YAAY,CAACpL,KAAK,CAACiL,aAAa,CAAC;;EAEjC;EACA;EACA;EACA;EACA;EACA;EACA;;QAEA,IAAMI,aAAa,GAAG,IAAIvF,gBAAgB,CAAC,IAAI,CAAClG,MAAM,CAAC;EACvDyL,MAAAA,aAAa,CAACrL,KAAK,CAACiL,aAAa,CAAC;EAElC,MAAA,OAAOR,QAAQ;EACnB,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CAzEiC9K,SAAS,CAAA;;ACVD,MAEzB2L,WAAW,0BAAAC,aAAA,EAAA;IAC5B,SAAAD,WAAAA,CAAYE,MAAM,EAAE;EAAA,IAAA,IAAA7M,KAAA;EAAAR,IAAAA,eAAA,OAAAmN,WAAA,CAAA;MAChB3M,KAAA,GAAAiC,UAAA,CAAA,IAAA,EAAA0K,WAAA,CAAA;MACA3M,KAAA,CAAK6M,MAAM,GAAAC,cAAA,CAAA;EACPhB,MAAAA,QAAQ,EAAE,IAAI;EACdiB,MAAAA,QAAQ,EAAE,KAAK;EACfC,MAAAA,KAAK,EAAE;EAAM,KAAA,EACVH,MAAM,CACZ;MAED7M,KAAA,CAAKsB,SAAS,GAAG,OAAOtB,KAAA,CAAK6M,MAAM,CAACvL,SAAS,KAAK,QAAQ,GACpDQ,QAAQ,CAACmL,aAAa,CAACjN,KAAA,CAAK6M,MAAM,CAACvL,SAAS,CAAC,GAC7CtB,KAAA,CAAK6M,MAAM,CAACvL,SAAS;EAE3B,IAAA,IAAI,CAACtB,KAAA,CAAKsB,SAAS,EAAE;EACjB,MAAA,MAAM,IAAIF,KAAK,CAAC,kCAAkC,CAAC;EACvD,IAAA;MAEApB,KAAA,CAAKkF,KAAK,GAAG,IAAI;MACjBlF,KAAA,CAAK8L,QAAQ,GAAG,IAAI;MAEpB9L,KAAA,CAAKkN,IAAI,EAAE;EAAC,IAAA,OAAAlN,KAAA;EAChB,EAAA;IAACsC,SAAA,CAAAqK,WAAA,EAAAC,aAAA,CAAA;IAAA,OAAAlN,YAAA,CAAAiN,WAAA,EAAA,CAAA;MAAAhN,GAAA,EAAA,MAAA;EAAAC,IAAAA,KAAA,EAED,SAAAsN,IAAIA,GAAG;QACH,IAAI,CAAC5L,SAAS,CAACsB,SAAS,CAACC,GAAG,CAAC,WAAW,CAAC;;EAEzC;QACA,IAAMsK,aAAa,GAAG,IAAI,CAAC7L,SAAS,CAAC2L,aAAa,CAAC,OAAO,CAAC;EAC3D,MAAA,IAAIE,aAAa,EAAE;UACf,IAAI,CAACjI,KAAK,GAAGiI,aAAa;UAC1B,IAAI,CAACjI,KAAK,CAACtC,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;EAC5C;EACA,QAAA,IAAI,IAAI,CAACgK,MAAM,CAACO,GAAG,EAAE,IAAI,CAAClI,KAAK,CAACkI,GAAG,GAAG,IAAI,CAACP,MAAM,CAACO,GAAG;EACrD,QAAA,IAAI,IAAI,CAACP,MAAM,CAACE,QAAQ,EAAE,IAAI,CAAC7H,KAAK,CAAC6H,QAAQ,GAAG,IAAI;EACxD,MAAA,CAAC,MAAM;UACH,IAAI,CAAC7H,KAAK,GAAGpD,QAAQ,CAACH,aAAa,CAAC,OAAO,CAAC;EAC5C,QAAA,IAAI,CAACuD,KAAK,CAACrD,SAAS,GAAG,kBAAkB;EACzC,QAAA,IAAI,IAAI,CAACgL,MAAM,CAACO,GAAG,EAAE,IAAI,CAAClI,KAAK,CAACkI,GAAG,GAAG,IAAI,CAACP,MAAM,CAACO,GAAG;EACrD,QAAA,IAAI,IAAI,CAACP,MAAM,CAACE,QAAQ,EAAE,IAAI,CAAC7H,KAAK,CAAC6H,QAAQ,GAAG,IAAI;UACpD,IAAI,CAACzL,SAAS,CAACC,WAAW,CAAC,IAAI,CAAC2D,KAAK,CAAC;EAC1C,MAAA;;EAEA;EACA,MAAA,IAAI,IAAI,CAAC2H,MAAM,CAACf,QAAQ,EAAE;EACtB,QAAA,IAAI,CAACuB,iBAAiB,GAAG,IAAIxB,QAAQ,CAAC,IAAI,CAAC;UAC3C,IAAI,CAACwB,iBAAiB,CAAChM,KAAK,CAAC,IAAI,CAACC,SAAS,CAAC;EAChD,MAAA;;EAEA;QACA,IAAI,CAACgM,YAAY,EAAE;;EAEnB;QACA,IAAI,CAACC,YAAY,EAAE;EACvB,IAAA;EAAC,GAAA,EAAA;MAAA5N,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EAED,SAAA0N,YAAYA,GAAG;EAAA,MAAA,IAAAvM,MAAA,GAAA,IAAA;EACX;EACA,MAAA,IAAI,CAACmE,KAAK,CAACV,gBAAgB,CAAC,MAAM,EAAE,YAAM;EACtCzD,QAAAA,MAAI,CAACV,IAAI,CAAC,MAAM,CAAC;UACjBU,MAAI,CAACyM,mBAAmB,EAAE;EAC9B,MAAA,CAAC,CAAC;EAEF,MAAA,IAAI,CAACtI,KAAK,CAACV,gBAAgB,CAAC,OAAO,EAAE,YAAM;EACvCzD,QAAAA,MAAI,CAACV,IAAI,CAAC,OAAO,CAAC;UAClBU,MAAI,CAACwM,YAAY,EAAE;EACvB,MAAA,CAAC,CAAC;EAEF,MAAA,IAAI,CAACrI,KAAK,CAACV,gBAAgB,CAAC,OAAO,EAAE,YAAM;EACvCzD,QAAAA,MAAI,CAACV,IAAI,CAAC,OAAO,CAAC;UAClBU,MAAI,CAACwM,YAAY,EAAE;EACvB,MAAA,CAAC,CAAC;EAEF,MAAA,IAAI,CAACrI,KAAK,CAACV,gBAAgB,CAAC,YAAY,EAAE,YAAA;EAAA,QAAA,OAAMzD,MAAI,CAACV,IAAI,CAAC,YAAY,CAAC;QAAA,CAAA,CAAC;EACxE,MAAA,IAAI,CAAC6E,KAAK,CAACV,gBAAgB,CAAC,cAAc,EAAE,YAAA;EAAA,QAAA,OAAMzD,MAAI,CAACV,IAAI,CAAC,cAAc,CAAC;QAAA,CAAA,CAAC;EAC5E,MAAA,IAAI,CAAC6E,KAAK,CAACV,gBAAgB,CAAC,gBAAgB,EAAE,YAAA;EAAA,QAAA,OAAMzD,MAAI,CAACV,IAAI,CAAC,gBAAgB,CAAC;QAAA,CAAA,CAAC;;EAEhF;EACA,MAAA,IAAI,CAACiB,SAAS,CAACkD,gBAAgB,CAAC,YAAY,EAAE,YAAA;EAAA,QAAA,OAAMzD,MAAI,CAACwM,YAAY,EAAE;QAAA,CAAA,CAAC;EACxE,MAAA,IAAI,CAACjM,SAAS,CAACkD,gBAAgB,CAAC,YAAY,EAAE,YAAA;EAAA,QAAA,OAAMzD,MAAI,CAACyM,mBAAmB,EAAE;QAAA,CAAA,CAAC;EAC/E,MAAA,IAAI,CAAClM,SAAS,CAACkD,gBAAgB,CAAC,WAAW,EAAE,YAAM;UAC/CzD,MAAI,CAACwM,YAAY,EAAE;UACnBxM,MAAI,CAACyM,mBAAmB,EAAE;EAC9B,MAAA,CAAC,CAAC;;EAEF;EACA,MAAA,IAAI,CAACtI,KAAK,CAACV,gBAAgB,CAAC,OAAO,EAAE,YAAA;EAAA,QAAA,OAAMzD,MAAI,CAAC4B,UAAU,EAAE;QAAA,CAAA,CAAC;EACjE,IAAA;EAAC,GAAA,EAAA;MAAAhD,GAAA,EAAA,cAAA;EAAAC,IAAAA,KAAA,EAED,SAAA2N,YAAYA,GAAG;QACX,IAAI,CAACjM,SAAS,CAACsB,SAAS,CAACC,GAAG,CAAC,kBAAkB,CAAC;QAChD,IAAI,IAAI,CAAC4K,eAAe,EAAEC,YAAY,CAAC,IAAI,CAACD,eAAe,CAAC;EAChE,IAAA;EAAC,GAAA,EAAA;MAAA9N,GAAA,EAAA,qBAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4N,mBAAmBA,GAAG;EAAA,MAAA,IAAA5D,MAAA,GAAA,IAAA;EAClB,MAAA,IAAI,IAAI,CAAC1E,KAAK,CAACyI,MAAM,EAAE,OAAO;;QAE9B,IAAI,IAAI,CAACF,eAAe,EAAEC,YAAY,CAAC,IAAI,CAACD,eAAe,CAAC;EAC5D,MAAA,IAAI,CAACA,eAAe,GAAGG,UAAU,CAAC,YAAM;UACpChE,MAAI,CAACtI,SAAS,CAACsB,SAAS,CAACE,MAAM,CAAC,kBAAkB,CAAC;QACvD,CAAC,EAAE,IAAI,CAAC;EACZ,IAAA;EAAC,GAAA,EAAA;MAAAnD,GAAA,EAAA,MAAA;EAAAC,IAAAA,KAAA,EAED,SAAAiO,IAAIA,GAAG;EACH,MAAA,OAAO,IAAI,CAAC3I,KAAK,CAAC2I,IAAI,EAAE;EAC5B,IAAA;EAAC,GAAA,EAAA;MAAAlO,GAAA,EAAA,OAAA;EAAAC,IAAAA,KAAA,EAED,SAAAkO,KAAKA,GAAG;EACJ,MAAA,IAAI,CAAC5I,KAAK,CAAC4I,KAAK,EAAE;EACtB,IAAA;EAAC,GAAA,EAAA;MAAAnO,GAAA,EAAA,MAAA;EAAAC,IAAAA,KAAA,EAED,SAAAoG,IAAIA,CAACf,IAAI,EAAE;EACP,MAAA,IAAI,CAACC,KAAK,CAACO,WAAW,GAAGR,IAAI;EACjC,IAAA;EAAC,GAAA,EAAA;MAAAtF,GAAA,EAAA,WAAA;EAAAC,IAAAA,KAAA,EAED,SAAA6G,SAASA,CAACE,MAAM,EAAE;EACd,MAAA,IAAI,CAACzB,KAAK,CAACyB,MAAM,GAAGd,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAAC,CAAC,EAAEY,MAAM,CAAC,CAAC;EACpD,MAAA,IAAI,CAACzB,KAAK,CAACsB,KAAK,GAAIG,MAAM,KAAK,CAAE;EACrC,IAAA;EAAC,GAAA,EAAA;MAAAhH,GAAA,EAAA,YAAA;EAAAC,IAAAA,KAAA,EAED,SAAA+C,UAAUA,GAAG;EACT,MAAA,IAAI,IAAI,CAACuC,KAAK,CAACyI,MAAM,EAAE;UACnB,IAAI,CAACE,IAAI,EAAE;EACf,MAAA,CAAC,MAAM;UACH,IAAI,CAACC,KAAK,EAAE;EAChB,MAAA;EACJ,IAAA;EAAC,GAAA,EAAA;MAAAnO,GAAA,EAAA,SAAA;EAAAC,IAAAA,KAAA,EAED,SAAA4B,OAAOA,GAAG;EACN,MAAA,IAAI,CAAC0D,KAAK,CAACpC,MAAM,EAAE;QACnB,IAAI,IAAI,CAACgJ,QAAQ,EAAE,IAAI,CAACA,QAAQ,CAACtK,OAAO,EAAE;EAC1C,MAAA,IAAI,CAACF,SAAS,CAACkB,SAAS,GAAG,EAAE;EACjC,IAAA;EAAC,GAAA,CAAA,CAAA;EAAA,CAAA,CApIoCjD,YAAY;;;;;;;;"}